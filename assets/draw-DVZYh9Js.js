import{c as Di,S as Bn,a as Zp,i as Uu,f as Jp,d as Qp,r as jp,G as e0,u as qi,l as wt,E as Dn,b as kn,e as t0,g as n0,h as i0,j as Gt,m as r0,k as s0,n as o0,o as Bu,p as a0,q as u0,s as ku,t as l0,v as f0,w as h0,x as c0,y as d0,z as g0,A as Ws,P as Ot,B as _0,C as p0,D as m0,F as v0,H as y0,I as Tu,J as C0,K as x0,L as w0,M as S0,N as Hi,O as T0,Q as E0,R as A0,T as Qi,U as Nu,V as Vi,W as oe,X as bt,Y as P0,Z as $i,_ as F0,$ as Wu,a0 as ke,a1 as I0,a2 as pe,a3 as Yi,a4 as Eu,a5 as Us,a6 as Ku,a7 as ji,a8 as L0,a9 as R0,aa as M0,ab as D0,ac as G0,ad as nn,ae as Xi,af as Es,ag as Je,ah as $e,ai as Gn,aj as O0,ak as qu,al as Hu,am as b0,an as Vu,ao as U0,ap as B0,aq as Au,ar as k0,as as N0,at as Bs,au as W0,av as K0,aw as q0,ax as H0,ay as V0,az as $0,aA as Y0,aB as X0,aC as Pu,aD as z0}from"./background-layer-group-Bo_q_pwo.js";import{l as Z0,i as $u,a as Yu,b as J0,c as Q0,V as Ks,d as qs,F as ft,R as Xu,e as zi,O as zu,f as j0}from"./overlay-layer-group-DlL-LjUs.js";var Rn={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var em=Rn.exports,Fu;function tm(){return Fu||(Fu=1,function(C,i){(function(){var r,o="4.17.21",u=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",_="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",x=500,S="__lodash_placeholder__",I=1,P=2,F=4,D=1,k=2,K=1,J=2,ae=4,ee=8,he=16,Le=32,on=64,Qe=128,an=256,ir=512,el=30,tl="...",nl=800,il=16,Vs=1,rl=2,sl=3,Tt=1/0,ct=9007199254740991,ol=17976931348623157e292,Nn=NaN,Ye=4294967295,al=Ye-1,ul=Ye>>>1,ll=[["ary",Qe],["bind",K],["bindKey",J],["curry",ee],["curryRight",he],["flip",ir],["partial",Le],["partialRight",on],["rearg",an]],Ut="[object Arguments]",Wn="[object Array]",fl="[object AsyncFunction]",un="[object Boolean]",ln="[object Date]",hl="[object DOMException]",Kn="[object Error]",qn="[object Function]",$s="[object GeneratorFunction]",Ne="[object Map]",fn="[object Number]",cl="[object Null]",je="[object Object]",Ys="[object Promise]",dl="[object Proxy]",hn="[object RegExp]",We="[object Set]",cn="[object String]",Hn="[object Symbol]",gl="[object Undefined]",dn="[object WeakMap]",_l="[object WeakSet]",gn="[object ArrayBuffer]",Bt="[object DataView]",rr="[object Float32Array]",sr="[object Float64Array]",or="[object Int8Array]",ar="[object Int16Array]",ur="[object Int32Array]",lr="[object Uint8Array]",fr="[object Uint8ClampedArray]",hr="[object Uint16Array]",cr="[object Uint32Array]",pl=/\b__p \+= '';/g,ml=/\b(__p \+=) '' \+/g,vl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xs=/&(?:amp|lt|gt|quot|#39);/g,zs=/[&<>"']/g,yl=RegExp(Xs.source),Cl=RegExp(zs.source),xl=/<%-([\s\S]+?)%>/g,wl=/<%([\s\S]+?)%>/g,Zs=/<%=([\s\S]+?)%>/g,Sl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tl=/^\w*$/,El=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dr=/[\\^$.*+?()[\]{}|]/g,Al=RegExp(dr.source),gr=/^\s+/,Pl=/\s/,Fl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Il=/\{\n\/\* \[wrapped with (.+)\] \*/,Ll=/,? & /,Rl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ml=/[()=,{}\[\]\/\s]/,Dl=/\\(\\)?/g,Gl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Js=/\w*$/,Ol=/^[-+]0x[0-9a-f]+$/i,bl=/^0b[01]+$/i,Ul=/^\[object .+?Constructor\]$/,Bl=/^0o[0-7]+$/i,kl=/^(?:0|[1-9]\d*)$/,Nl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vn=/($^)/,Wl=/['\n\r\u2028\u2029\\]/g,$n="\\ud800-\\udfff",Kl="\\u0300-\\u036f",ql="\\ufe20-\\ufe2f",Hl="\\u20d0-\\u20ff",Qs=Kl+ql+Hl,js="\\u2700-\\u27bf",eo="a-z\\xdf-\\xf6\\xf8-\\xff",Vl="\\xac\\xb1\\xd7\\xf7",$l="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yl="\\u2000-\\u206f",Xl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",to="A-Z\\xc0-\\xd6\\xd8-\\xde",no="\\ufe0e\\ufe0f",io=Vl+$l+Yl+Xl,_r="['’]",zl="["+$n+"]",ro="["+io+"]",Yn="["+Qs+"]",so="\\d+",Zl="["+js+"]",oo="["+eo+"]",ao="[^"+$n+io+so+js+eo+to+"]",pr="\\ud83c[\\udffb-\\udfff]",Jl="(?:"+Yn+"|"+pr+")",uo="[^"+$n+"]",mr="(?:\\ud83c[\\udde6-\\uddff]){2}",vr="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="["+to+"]",lo="\\u200d",fo="(?:"+oo+"|"+ao+")",Ql="(?:"+kt+"|"+ao+")",ho="(?:"+_r+"(?:d|ll|m|re|s|t|ve))?",co="(?:"+_r+"(?:D|LL|M|RE|S|T|VE))?",go=Jl+"?",_o="["+no+"]?",jl="(?:"+lo+"(?:"+[uo,mr,vr].join("|")+")"+_o+go+")*",ef="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",po=_o+go+jl,nf="(?:"+[Zl,mr,vr].join("|")+")"+po,rf="(?:"+[uo+Yn+"?",Yn,mr,vr,zl].join("|")+")",sf=RegExp(_r,"g"),of=RegExp(Yn,"g"),yr=RegExp(pr+"(?="+pr+")|"+rf+po,"g"),af=RegExp([kt+"?"+oo+"+"+ho+"(?="+[ro,kt,"$"].join("|")+")",Ql+"+"+co+"(?="+[ro,kt+fo,"$"].join("|")+")",kt+"?"+fo+"+"+ho,kt+"+"+co,tf,ef,so,nf].join("|"),"g"),uf=RegExp("["+lo+$n+Qs+no+"]"),lf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ff=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hf=-1,j={};j[rr]=j[sr]=j[or]=j[ar]=j[ur]=j[lr]=j[fr]=j[hr]=j[cr]=!0,j[Ut]=j[Wn]=j[gn]=j[un]=j[Bt]=j[ln]=j[Kn]=j[qn]=j[Ne]=j[fn]=j[je]=j[hn]=j[We]=j[cn]=j[dn]=!1;var Q={};Q[Ut]=Q[Wn]=Q[gn]=Q[Bt]=Q[un]=Q[ln]=Q[rr]=Q[sr]=Q[or]=Q[ar]=Q[ur]=Q[Ne]=Q[fn]=Q[je]=Q[hn]=Q[We]=Q[cn]=Q[Hn]=Q[lr]=Q[fr]=Q[hr]=Q[cr]=!0,Q[Kn]=Q[qn]=Q[dn]=!1;var cf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},df={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_f={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pf=parseFloat,mf=parseInt,mo=typeof Di=="object"&&Di&&Di.Object===Object&&Di,vf=typeof self=="object"&&self&&self.Object===Object&&self,ce=mo||vf||Function("return this")(),Cr=i&&!i.nodeType&&i,Et=Cr&&!0&&C&&!C.nodeType&&C,vo=Et&&Et.exports===Cr,xr=vo&&mo.process,Re=function(){try{var p=Et&&Et.require&&Et.require("util").types;return p||xr&&xr.binding&&xr.binding("util")}catch{}}(),yo=Re&&Re.isArrayBuffer,Co=Re&&Re.isDate,xo=Re&&Re.isMap,wo=Re&&Re.isRegExp,So=Re&&Re.isSet,To=Re&&Re.isTypedArray;function Te(p,w,y){switch(y.length){case 0:return p.call(w);case 1:return p.call(w,y[0]);case 2:return p.call(w,y[0],y[1]);case 3:return p.call(w,y[0],y[1],y[2])}return p.apply(w,y)}function yf(p,w,y,R){for(var U=-1,Y=p==null?0:p.length;++U<Y;){var ue=p[U];w(R,ue,y(ue),p)}return R}function Me(p,w){for(var y=-1,R=p==null?0:p.length;++y<R&&w(p[y],y,p)!==!1;);return p}function Cf(p,w){for(var y=p==null?0:p.length;y--&&w(p[y],y,p)!==!1;);return p}function Eo(p,w){for(var y=-1,R=p==null?0:p.length;++y<R;)if(!w(p[y],y,p))return!1;return!0}function dt(p,w){for(var y=-1,R=p==null?0:p.length,U=0,Y=[];++y<R;){var ue=p[y];w(ue,y,p)&&(Y[U++]=ue)}return Y}function Xn(p,w){var y=p==null?0:p.length;return!!y&&Nt(p,w,0)>-1}function wr(p,w,y){for(var R=-1,U=p==null?0:p.length;++R<U;)if(y(w,p[R]))return!0;return!1}function te(p,w){for(var y=-1,R=p==null?0:p.length,U=Array(R);++y<R;)U[y]=w(p[y],y,p);return U}function gt(p,w){for(var y=-1,R=w.length,U=p.length;++y<R;)p[U+y]=w[y];return p}function Sr(p,w,y,R){var U=-1,Y=p==null?0:p.length;for(R&&Y&&(y=p[++U]);++U<Y;)y=w(y,p[U],U,p);return y}function xf(p,w,y,R){var U=p==null?0:p.length;for(R&&U&&(y=p[--U]);U--;)y=w(y,p[U],U,p);return y}function Tr(p,w){for(var y=-1,R=p==null?0:p.length;++y<R;)if(w(p[y],y,p))return!0;return!1}var wf=Er("length");function Sf(p){return p.split("")}function Tf(p){return p.match(Rl)||[]}function Ao(p,w,y){var R;return y(p,function(U,Y,ue){if(w(U,Y,ue))return R=Y,!1}),R}function zn(p,w,y,R){for(var U=p.length,Y=y+(R?1:-1);R?Y--:++Y<U;)if(w(p[Y],Y,p))return Y;return-1}function Nt(p,w,y){return w===w?bf(p,w,y):zn(p,Po,y)}function Ef(p,w,y,R){for(var U=y-1,Y=p.length;++U<Y;)if(R(p[U],w))return U;return-1}function Po(p){return p!==p}function Fo(p,w){var y=p==null?0:p.length;return y?Pr(p,w)/y:Nn}function Er(p){return function(w){return w==null?r:w[p]}}function Ar(p){return function(w){return p==null?r:p[w]}}function Io(p,w,y,R,U){return U(p,function(Y,ue,Z){y=R?(R=!1,Y):w(y,Y,ue,Z)}),y}function Af(p,w){var y=p.length;for(p.sort(w);y--;)p[y]=p[y].value;return p}function Pr(p,w){for(var y,R=-1,U=p.length;++R<U;){var Y=w(p[R]);Y!==r&&(y=y===r?Y:y+Y)}return y}function Fr(p,w){for(var y=-1,R=Array(p);++y<p;)R[y]=w(y);return R}function Pf(p,w){return te(w,function(y){return[y,p[y]]})}function Lo(p){return p&&p.slice(0,Go(p)+1).replace(gr,"")}function Ee(p){return function(w){return p(w)}}function Ir(p,w){return te(w,function(y){return p[y]})}function _n(p,w){return p.has(w)}function Ro(p,w){for(var y=-1,R=p.length;++y<R&&Nt(w,p[y],0)>-1;);return y}function Mo(p,w){for(var y=p.length;y--&&Nt(w,p[y],0)>-1;);return y}function Ff(p,w){for(var y=p.length,R=0;y--;)p[y]===w&&++R;return R}var If=Ar(cf),Lf=Ar(df);function Rf(p){return"\\"+_f[p]}function Mf(p,w){return p==null?r:p[w]}function Wt(p){return uf.test(p)}function Df(p){return lf.test(p)}function Gf(p){for(var w,y=[];!(w=p.next()).done;)y.push(w.value);return y}function Lr(p){var w=-1,y=Array(p.size);return p.forEach(function(R,U){y[++w]=[U,R]}),y}function Do(p,w){return function(y){return p(w(y))}}function _t(p,w){for(var y=-1,R=p.length,U=0,Y=[];++y<R;){var ue=p[y];(ue===w||ue===S)&&(p[y]=S,Y[U++]=y)}return Y}function Zn(p){var w=-1,y=Array(p.size);return p.forEach(function(R){y[++w]=R}),y}function Of(p){var w=-1,y=Array(p.size);return p.forEach(function(R){y[++w]=[R,R]}),y}function bf(p,w,y){for(var R=y-1,U=p.length;++R<U;)if(p[R]===w)return R;return-1}function Uf(p,w,y){for(var R=y+1;R--;)if(p[R]===w)return R;return R}function Kt(p){return Wt(p)?kf(p):wf(p)}function Ke(p){return Wt(p)?Nf(p):Sf(p)}function Go(p){for(var w=p.length;w--&&Pl.test(p.charAt(w)););return w}var Bf=Ar(gf);function kf(p){for(var w=yr.lastIndex=0;yr.test(p);)++w;return w}function Nf(p){return p.match(yr)||[]}function Wf(p){return p.match(af)||[]}var Kf=function p(w){w=w==null?ce:qt.defaults(ce.Object(),w,qt.pick(ce,ff));var y=w.Array,R=w.Date,U=w.Error,Y=w.Function,ue=w.Math,Z=w.Object,Rr=w.RegExp,qf=w.String,De=w.TypeError,Jn=y.prototype,Hf=Y.prototype,Ht=Z.prototype,Qn=w["__core-js_shared__"],jn=Hf.toString,z=Ht.hasOwnProperty,Vf=0,Oo=function(){var e=/[^.]+$/.exec(Qn&&Qn.keys&&Qn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ei=Ht.toString,$f=jn.call(Z),Yf=ce._,Xf=Rr("^"+jn.call(z).replace(dr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ti=vo?w.Buffer:r,pt=w.Symbol,ni=w.Uint8Array,bo=ti?ti.allocUnsafe:r,ii=Do(Z.getPrototypeOf,Z),Uo=Z.create,Bo=Ht.propertyIsEnumerable,ri=Jn.splice,ko=pt?pt.isConcatSpreadable:r,pn=pt?pt.iterator:r,At=pt?pt.toStringTag:r,si=function(){try{var e=Rt(Z,"defineProperty");return e({},"",{}),e}catch{}}(),zf=w.clearTimeout!==ce.clearTimeout&&w.clearTimeout,Zf=R&&R.now!==ce.Date.now&&R.now,Jf=w.setTimeout!==ce.setTimeout&&w.setTimeout,oi=ue.ceil,ai=ue.floor,Mr=Z.getOwnPropertySymbols,Qf=ti?ti.isBuffer:r,No=w.isFinite,jf=Jn.join,eh=Do(Z.keys,Z),le=ue.max,ge=ue.min,th=R.now,nh=w.parseInt,Wo=ue.random,ih=Jn.reverse,Dr=Rt(w,"DataView"),mn=Rt(w,"Map"),Gr=Rt(w,"Promise"),Vt=Rt(w,"Set"),vn=Rt(w,"WeakMap"),yn=Rt(Z,"create"),ui=vn&&new vn,$t={},rh=Mt(Dr),sh=Mt(mn),oh=Mt(Gr),ah=Mt(Vt),uh=Mt(vn),li=pt?pt.prototype:r,Cn=li?li.valueOf:r,Ko=li?li.toString:r;function l(e){if(ie(e)&&!B(e)&&!(e instanceof V)){if(e instanceof Ge)return e;if(z.call(e,"__wrapped__"))return qa(e)}return new Ge(e)}var Yt=function(){function e(){}return function(t){if(!ne(t))return{};if(Uo)return Uo(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function fi(){}function Ge(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}l.templateSettings={escape:xl,evaluate:wl,interpolate:Zs,variable:"",imports:{_:l}},l.prototype=fi.prototype,l.prototype.constructor=l,Ge.prototype=Yt(fi.prototype),Ge.prototype.constructor=Ge;function V(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ye,this.__views__=[]}function lh(){var e=new V(this.__wrapped__);return e.__actions__=Ce(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ce(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ce(this.__views__),e}function fh(){if(this.__filtered__){var e=new V(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function hh(){var e=this.__wrapped__.value(),t=this.__dir__,n=B(e),s=t<0,a=n?e.length:0,f=Sc(0,a,this.__views__),c=f.start,g=f.end,v=g-c,T=s?g:c-1,E=this.__iteratees__,A=E.length,L=0,M=ge(v,this.__takeCount__);if(!n||!s&&a==v&&M==v)return ca(e,this.__actions__);var O=[];e:for(;v--&&L<M;){T+=t;for(var W=-1,b=e[T];++W<A;){var H=E[W],$=H.iteratee,Fe=H.type,ye=$(b);if(Fe==rl)b=ye;else if(!ye){if(Fe==Vs)continue e;break e}}O[L++]=b}return O}V.prototype=Yt(fi.prototype),V.prototype.constructor=V;function Pt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function ch(){this.__data__=yn?yn(null):{},this.size=0}function dh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function gh(e){var t=this.__data__;if(yn){var n=t[e];return n===m?r:n}return z.call(t,e)?t[e]:r}function _h(e){var t=this.__data__;return yn?t[e]!==r:z.call(t,e)}function ph(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yn&&t===r?m:t,this}Pt.prototype.clear=ch,Pt.prototype.delete=dh,Pt.prototype.get=gh,Pt.prototype.has=_h,Pt.prototype.set=ph;function et(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function mh(){this.__data__=[],this.size=0}function vh(e){var t=this.__data__,n=hi(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():ri.call(t,n,1),--this.size,!0}function yh(e){var t=this.__data__,n=hi(t,e);return n<0?r:t[n][1]}function Ch(e){return hi(this.__data__,e)>-1}function xh(e,t){var n=this.__data__,s=hi(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}et.prototype.clear=mh,et.prototype.delete=vh,et.prototype.get=yh,et.prototype.has=Ch,et.prototype.set=xh;function tt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}function wh(){this.size=0,this.__data__={hash:new Pt,map:new(mn||et),string:new Pt}}function Sh(e){var t=Si(this,e).delete(e);return this.size-=t?1:0,t}function Th(e){return Si(this,e).get(e)}function Eh(e){return Si(this,e).has(e)}function Ah(e,t){var n=Si(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}tt.prototype.clear=wh,tt.prototype.delete=Sh,tt.prototype.get=Th,tt.prototype.has=Eh,tt.prototype.set=Ah;function Ft(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new tt;++t<n;)this.add(e[t])}function Ph(e){return this.__data__.set(e,m),this}function Fh(e){return this.__data__.has(e)}Ft.prototype.add=Ft.prototype.push=Ph,Ft.prototype.has=Fh;function qe(e){var t=this.__data__=new et(e);this.size=t.size}function Ih(){this.__data__=new et,this.size=0}function Lh(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Rh(e){return this.__data__.get(e)}function Mh(e){return this.__data__.has(e)}function Dh(e,t){var n=this.__data__;if(n instanceof et){var s=n.__data__;if(!mn||s.length<u-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new tt(s)}return n.set(e,t),this.size=n.size,this}qe.prototype.clear=Ih,qe.prototype.delete=Lh,qe.prototype.get=Rh,qe.prototype.has=Mh,qe.prototype.set=Dh;function qo(e,t){var n=B(e),s=!n&&Dt(e),a=!n&&!s&&xt(e),f=!n&&!s&&!a&&Jt(e),c=n||s||a||f,g=c?Fr(e.length,qf):[],v=g.length;for(var T in e)(t||z.call(e,T))&&!(c&&(T=="length"||a&&(T=="offset"||T=="parent")||f&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||st(T,v)))&&g.push(T);return g}function Ho(e){var t=e.length;return t?e[Vr(0,t-1)]:r}function Gh(e,t){return Ti(Ce(e),It(t,0,e.length))}function Oh(e){return Ti(Ce(e))}function Or(e,t,n){(n!==r&&!He(e[t],n)||n===r&&!(t in e))&&nt(e,t,n)}function xn(e,t,n){var s=e[t];(!(z.call(e,t)&&He(s,n))||n===r&&!(t in e))&&nt(e,t,n)}function hi(e,t){for(var n=e.length;n--;)if(He(e[n][0],t))return n;return-1}function bh(e,t,n,s){return mt(e,function(a,f,c){t(s,a,n(a),c)}),s}function Vo(e,t){return e&&ze(t,fe(t),e)}function Uh(e,t){return e&&ze(t,we(t),e)}function nt(e,t,n){t=="__proto__"&&si?si(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function br(e,t){for(var n=-1,s=t.length,a=y(s),f=e==null;++n<s;)a[n]=f?r:ps(e,t[n]);return a}function It(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function Oe(e,t,n,s,a,f){var c,g=t&I,v=t&P,T=t&F;if(n&&(c=a?n(e,s,a,f):n(e)),c!==r)return c;if(!ne(e))return e;var E=B(e);if(E){if(c=Ec(e),!g)return Ce(e,c)}else{var A=_e(e),L=A==qn||A==$s;if(xt(e))return _a(e,g);if(A==je||A==Ut||L&&!a){if(c=v||L?{}:Ga(e),!g)return v?gc(e,Uh(c,e)):dc(e,Vo(c,e))}else{if(!Q[A])return a?e:{};c=Ac(e,A,g)}}f||(f=new qe);var M=f.get(e);if(M)return M;f.set(e,c),lu(e)?e.forEach(function(b){c.add(Oe(b,t,n,b,e,f))}):au(e)&&e.forEach(function(b,H){c.set(H,Oe(b,t,n,H,e,f))});var O=T?v?ns:ts:v?we:fe,W=E?r:O(e);return Me(W||e,function(b,H){W&&(H=b,b=e[H]),xn(c,H,Oe(b,t,n,H,e,f))}),c}function Bh(e){var t=fe(e);return function(n){return $o(n,e,t)}}function $o(e,t,n){var s=n.length;if(e==null)return!s;for(e=Z(e);s--;){var a=n[s],f=t[a],c=e[a];if(c===r&&!(a in e)||!f(c))return!1}return!0}function Yo(e,t,n){if(typeof e!="function")throw new De(d);return Fn(function(){e.apply(r,n)},t)}function wn(e,t,n,s){var a=-1,f=Xn,c=!0,g=e.length,v=[],T=t.length;if(!g)return v;n&&(t=te(t,Ee(n))),s?(f=wr,c=!1):t.length>=u&&(f=_n,c=!1,t=new Ft(t));e:for(;++a<g;){var E=e[a],A=n==null?E:n(E);if(E=s||E!==0?E:0,c&&A===A){for(var L=T;L--;)if(t[L]===A)continue e;v.push(E)}else f(t,A,s)||v.push(E)}return v}var mt=Ca(Xe),Xo=Ca(Br,!0);function kh(e,t){var n=!0;return mt(e,function(s,a,f){return n=!!t(s,a,f),n}),n}function ci(e,t,n){for(var s=-1,a=e.length;++s<a;){var f=e[s],c=t(f);if(c!=null&&(g===r?c===c&&!Pe(c):n(c,g)))var g=c,v=f}return v}function Nh(e,t,n,s){var a=e.length;for(n=N(n),n<0&&(n=-n>a?0:a+n),s=s===r||s>a?a:N(s),s<0&&(s+=a),s=n>s?0:hu(s);n<s;)e[n++]=t;return e}function zo(e,t){var n=[];return mt(e,function(s,a,f){t(s,a,f)&&n.push(s)}),n}function de(e,t,n,s,a){var f=-1,c=e.length;for(n||(n=Fc),a||(a=[]);++f<c;){var g=e[f];t>0&&n(g)?t>1?de(g,t-1,n,s,a):gt(a,g):s||(a[a.length]=g)}return a}var Ur=xa(),Zo=xa(!0);function Xe(e,t){return e&&Ur(e,t,fe)}function Br(e,t){return e&&Zo(e,t,fe)}function di(e,t){return dt(t,function(n){return ot(e[n])})}function Lt(e,t){t=yt(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[Ze(t[n++])];return n&&n==s?e:r}function Jo(e,t,n){var s=t(e);return B(e)?s:gt(s,n(e))}function me(e){return e==null?e===r?gl:cl:At&&At in Z(e)?wc(e):Oc(e)}function kr(e,t){return e>t}function Wh(e,t){return e!=null&&z.call(e,t)}function Kh(e,t){return e!=null&&t in Z(e)}function qh(e,t,n){return e>=ge(t,n)&&e<le(t,n)}function Nr(e,t,n){for(var s=n?wr:Xn,a=e[0].length,f=e.length,c=f,g=y(f),v=1/0,T=[];c--;){var E=e[c];c&&t&&(E=te(E,Ee(t))),v=ge(E.length,v),g[c]=!n&&(t||a>=120&&E.length>=120)?new Ft(c&&E):r}E=e[0];var A=-1,L=g[0];e:for(;++A<a&&T.length<v;){var M=E[A],O=t?t(M):M;if(M=n||M!==0?M:0,!(L?_n(L,O):s(T,O,n))){for(c=f;--c;){var W=g[c];if(!(W?_n(W,O):s(e[c],O,n)))continue e}L&&L.push(O),T.push(M)}}return T}function Hh(e,t,n,s){return Xe(e,function(a,f,c){t(s,n(a),f,c)}),s}function Sn(e,t,n){t=yt(t,e),e=Ba(e,t);var s=e==null?e:e[Ze(Ue(t))];return s==null?r:Te(s,e,n)}function Qo(e){return ie(e)&&me(e)==Ut}function Vh(e){return ie(e)&&me(e)==gn}function $h(e){return ie(e)&&me(e)==ln}function Tn(e,t,n,s,a){return e===t?!0:e==null||t==null||!ie(e)&&!ie(t)?e!==e&&t!==t:Yh(e,t,n,s,Tn,a)}function Yh(e,t,n,s,a,f){var c=B(e),g=B(t),v=c?Wn:_e(e),T=g?Wn:_e(t);v=v==Ut?je:v,T=T==Ut?je:T;var E=v==je,A=T==je,L=v==T;if(L&&xt(e)){if(!xt(t))return!1;c=!0,E=!1}if(L&&!E)return f||(f=new qe),c||Jt(e)?Ra(e,t,n,s,a,f):Cc(e,t,v,n,s,a,f);if(!(n&D)){var M=E&&z.call(e,"__wrapped__"),O=A&&z.call(t,"__wrapped__");if(M||O){var W=M?e.value():e,b=O?t.value():t;return f||(f=new qe),a(W,b,n,s,f)}}return L?(f||(f=new qe),xc(e,t,n,s,a,f)):!1}function Xh(e){return ie(e)&&_e(e)==Ne}function Wr(e,t,n,s){var a=n.length,f=a,c=!s;if(e==null)return!f;for(e=Z(e);a--;){var g=n[a];if(c&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++a<f;){g=n[a];var v=g[0],T=e[v],E=g[1];if(c&&g[2]){if(T===r&&!(v in e))return!1}else{var A=new qe;if(s)var L=s(T,E,v,e,t,A);if(!(L===r?Tn(E,T,D|k,s,A):L))return!1}}return!0}function jo(e){if(!ne(e)||Lc(e))return!1;var t=ot(e)?Xf:Ul;return t.test(Mt(e))}function zh(e){return ie(e)&&me(e)==hn}function Zh(e){return ie(e)&&_e(e)==We}function Jh(e){return ie(e)&&Li(e.length)&&!!j[me(e)]}function ea(e){return typeof e=="function"?e:e==null?Se:typeof e=="object"?B(e)?ia(e[0],e[1]):na(e):wu(e)}function Kr(e){if(!Pn(e))return eh(e);var t=[];for(var n in Z(e))z.call(e,n)&&n!="constructor"&&t.push(n);return t}function Qh(e){if(!ne(e))return Gc(e);var t=Pn(e),n=[];for(var s in e)s=="constructor"&&(t||!z.call(e,s))||n.push(s);return n}function qr(e,t){return e<t}function ta(e,t){var n=-1,s=xe(e)?y(e.length):[];return mt(e,function(a,f,c){s[++n]=t(a,f,c)}),s}function na(e){var t=rs(e);return t.length==1&&t[0][2]?ba(t[0][0],t[0][1]):function(n){return n===e||Wr(n,e,t)}}function ia(e,t){return os(e)&&Oa(t)?ba(Ze(e),t):function(n){var s=ps(n,e);return s===r&&s===t?ms(n,e):Tn(t,s,D|k)}}function gi(e,t,n,s,a){e!==t&&Ur(t,function(f,c){if(a||(a=new qe),ne(f))jh(e,t,c,n,gi,s,a);else{var g=s?s(us(e,c),f,c+"",e,t,a):r;g===r&&(g=f),Or(e,c,g)}},we)}function jh(e,t,n,s,a,f,c){var g=us(e,n),v=us(t,n),T=c.get(v);if(T){Or(e,n,T);return}var E=f?f(g,v,n+"",e,t,c):r,A=E===r;if(A){var L=B(v),M=!L&&xt(v),O=!L&&!M&&Jt(v);E=v,L||M||O?B(g)?E=g:re(g)?E=Ce(g):M?(A=!1,E=_a(v,!0)):O?(A=!1,E=pa(v,!0)):E=[]:In(v)||Dt(v)?(E=g,Dt(g)?E=cu(g):(!ne(g)||ot(g))&&(E=Ga(v))):A=!1}A&&(c.set(v,E),a(E,v,s,f,c),c.delete(v)),Or(e,n,E)}function ra(e,t){var n=e.length;if(n)return t+=t<0?n:0,st(t,n)?e[t]:r}function sa(e,t,n){t.length?t=te(t,function(f){return B(f)?function(c){return Lt(c,f.length===1?f[0]:f)}:f}):t=[Se];var s=-1;t=te(t,Ee(G()));var a=ta(e,function(f,c,g){var v=te(t,function(T){return T(f)});return{criteria:v,index:++s,value:f}});return Af(a,function(f,c){return cc(f,c,n)})}function ec(e,t){return oa(e,t,function(n,s){return ms(e,s)})}function oa(e,t,n){for(var s=-1,a=t.length,f={};++s<a;){var c=t[s],g=Lt(e,c);n(g,c)&&En(f,yt(c,e),g)}return f}function tc(e){return function(t){return Lt(t,e)}}function Hr(e,t,n,s){var a=s?Ef:Nt,f=-1,c=t.length,g=e;for(e===t&&(t=Ce(t)),n&&(g=te(e,Ee(n)));++f<c;)for(var v=0,T=t[f],E=n?n(T):T;(v=a(g,E,v,s))>-1;)g!==e&&ri.call(g,v,1),ri.call(e,v,1);return e}function aa(e,t){for(var n=e?t.length:0,s=n-1;n--;){var a=t[n];if(n==s||a!==f){var f=a;st(a)?ri.call(e,a,1):Xr(e,a)}}return e}function Vr(e,t){return e+ai(Wo()*(t-e+1))}function nc(e,t,n,s){for(var a=-1,f=le(oi((t-e)/(n||1)),0),c=y(f);f--;)c[s?f:++a]=e,e+=n;return c}function $r(e,t){var n="";if(!e||t<1||t>ct)return n;do t%2&&(n+=e),t=ai(t/2),t&&(e+=e);while(t);return n}function q(e,t){return ls(Ua(e,t,Se),e+"")}function ic(e){return Ho(Qt(e))}function rc(e,t){var n=Qt(e);return Ti(n,It(t,0,n.length))}function En(e,t,n,s){if(!ne(e))return e;t=yt(t,e);for(var a=-1,f=t.length,c=f-1,g=e;g!=null&&++a<f;){var v=Ze(t[a]),T=n;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(a!=c){var E=g[v];T=s?s(E,v,g):r,T===r&&(T=ne(E)?E:st(t[a+1])?[]:{})}xn(g,v,T),g=g[v]}return e}var ua=ui?function(e,t){return ui.set(e,t),e}:Se,sc=si?function(e,t){return si(e,"toString",{configurable:!0,enumerable:!1,value:ys(t),writable:!0})}:Se;function oc(e){return Ti(Qt(e))}function be(e,t,n){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var f=y(a);++s<a;)f[s]=e[s+t];return f}function ac(e,t){var n;return mt(e,function(s,a,f){return n=t(s,a,f),!n}),!!n}function _i(e,t,n){var s=0,a=e==null?s:e.length;if(typeof t=="number"&&t===t&&a<=ul){for(;s<a;){var f=s+a>>>1,c=e[f];c!==null&&!Pe(c)&&(n?c<=t:c<t)?s=f+1:a=f}return a}return Yr(e,t,Se,n)}function Yr(e,t,n,s){var a=0,f=e==null?0:e.length;if(f===0)return 0;t=n(t);for(var c=t!==t,g=t===null,v=Pe(t),T=t===r;a<f;){var E=ai((a+f)/2),A=n(e[E]),L=A!==r,M=A===null,O=A===A,W=Pe(A);if(c)var b=s||O;else T?b=O&&(s||L):g?b=O&&L&&(s||!M):v?b=O&&L&&!M&&(s||!W):M||W?b=!1:b=s?A<=t:A<t;b?a=E+1:f=E}return ge(f,al)}function la(e,t){for(var n=-1,s=e.length,a=0,f=[];++n<s;){var c=e[n],g=t?t(c):c;if(!n||!He(g,v)){var v=g;f[a++]=c===0?0:c}}return f}function fa(e){return typeof e=="number"?e:Pe(e)?Nn:+e}function Ae(e){if(typeof e=="string")return e;if(B(e))return te(e,Ae)+"";if(Pe(e))return Ko?Ko.call(e):"";var t=e+"";return t=="0"&&1/e==-Tt?"-0":t}function vt(e,t,n){var s=-1,a=Xn,f=e.length,c=!0,g=[],v=g;if(n)c=!1,a=wr;else if(f>=u){var T=t?null:vc(e);if(T)return Zn(T);c=!1,a=_n,v=new Ft}else v=t?[]:g;e:for(;++s<f;){var E=e[s],A=t?t(E):E;if(E=n||E!==0?E:0,c&&A===A){for(var L=v.length;L--;)if(v[L]===A)continue e;t&&v.push(A),g.push(E)}else a(v,A,n)||(v!==g&&v.push(A),g.push(E))}return g}function Xr(e,t){return t=yt(t,e),e=Ba(e,t),e==null||delete e[Ze(Ue(t))]}function ha(e,t,n,s){return En(e,t,n(Lt(e,t)),s)}function pi(e,t,n,s){for(var a=e.length,f=s?a:-1;(s?f--:++f<a)&&t(e[f],f,e););return n?be(e,s?0:f,s?f+1:a):be(e,s?f+1:0,s?a:f)}function ca(e,t){var n=e;return n instanceof V&&(n=n.value()),Sr(t,function(s,a){return a.func.apply(a.thisArg,gt([s],a.args))},n)}function zr(e,t,n){var s=e.length;if(s<2)return s?vt(e[0]):[];for(var a=-1,f=y(s);++a<s;)for(var c=e[a],g=-1;++g<s;)g!=a&&(f[a]=wn(f[a]||c,e[g],t,n));return vt(de(f,1),t,n)}function da(e,t,n){for(var s=-1,a=e.length,f=t.length,c={};++s<a;){var g=s<f?t[s]:r;n(c,e[s],g)}return c}function Zr(e){return re(e)?e:[]}function Jr(e){return typeof e=="function"?e:Se}function yt(e,t){return B(e)?e:os(e,t)?[e]:Ka(X(e))}var uc=q;function Ct(e,t,n){var s=e.length;return n=n===r?s:n,!t&&n>=s?e:be(e,t,n)}var ga=zf||function(e){return ce.clearTimeout(e)};function _a(e,t){if(t)return e.slice();var n=e.length,s=bo?bo(n):new e.constructor(n);return e.copy(s),s}function Qr(e){var t=new e.constructor(e.byteLength);return new ni(t).set(new ni(e)),t}function lc(e,t){var n=t?Qr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function fc(e){var t=new e.constructor(e.source,Js.exec(e));return t.lastIndex=e.lastIndex,t}function hc(e){return Cn?Z(Cn.call(e)):{}}function pa(e,t){var n=t?Qr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ma(e,t){if(e!==t){var n=e!==r,s=e===null,a=e===e,f=Pe(e),c=t!==r,g=t===null,v=t===t,T=Pe(t);if(!g&&!T&&!f&&e>t||f&&c&&v&&!g&&!T||s&&c&&v||!n&&v||!a)return 1;if(!s&&!f&&!T&&e<t||T&&n&&a&&!s&&!f||g&&n&&a||!c&&a||!v)return-1}return 0}function cc(e,t,n){for(var s=-1,a=e.criteria,f=t.criteria,c=a.length,g=n.length;++s<c;){var v=ma(a[s],f[s]);if(v){if(s>=g)return v;var T=n[s];return v*(T=="desc"?-1:1)}}return e.index-t.index}function va(e,t,n,s){for(var a=-1,f=e.length,c=n.length,g=-1,v=t.length,T=le(f-c,0),E=y(v+T),A=!s;++g<v;)E[g]=t[g];for(;++a<c;)(A||a<f)&&(E[n[a]]=e[a]);for(;T--;)E[g++]=e[a++];return E}function ya(e,t,n,s){for(var a=-1,f=e.length,c=-1,g=n.length,v=-1,T=t.length,E=le(f-g,0),A=y(E+T),L=!s;++a<E;)A[a]=e[a];for(var M=a;++v<T;)A[M+v]=t[v];for(;++c<g;)(L||a<f)&&(A[M+n[c]]=e[a++]);return A}function Ce(e,t){var n=-1,s=e.length;for(t||(t=y(s));++n<s;)t[n]=e[n];return t}function ze(e,t,n,s){var a=!n;n||(n={});for(var f=-1,c=t.length;++f<c;){var g=t[f],v=s?s(n[g],e[g],g,n,e):r;v===r&&(v=e[g]),a?nt(n,g,v):xn(n,g,v)}return n}function dc(e,t){return ze(e,ss(e),t)}function gc(e,t){return ze(e,Ma(e),t)}function mi(e,t){return function(n,s){var a=B(n)?yf:bh,f=t?t():{};return a(n,e,G(s,2),f)}}function Xt(e){return q(function(t,n){var s=-1,a=n.length,f=a>1?n[a-1]:r,c=a>2?n[2]:r;for(f=e.length>3&&typeof f=="function"?(a--,f):r,c&&ve(n[0],n[1],c)&&(f=a<3?r:f,a=1),t=Z(t);++s<a;){var g=n[s];g&&e(t,g,s,f)}return t})}function Ca(e,t){return function(n,s){if(n==null)return n;if(!xe(n))return e(n,s);for(var a=n.length,f=t?a:-1,c=Z(n);(t?f--:++f<a)&&s(c[f],f,c)!==!1;);return n}}function xa(e){return function(t,n,s){for(var a=-1,f=Z(t),c=s(t),g=c.length;g--;){var v=c[e?g:++a];if(n(f[v],v,f)===!1)break}return t}}function _c(e,t,n){var s=t&K,a=An(e);function f(){var c=this&&this!==ce&&this instanceof f?a:e;return c.apply(s?n:this,arguments)}return f}function wa(e){return function(t){t=X(t);var n=Wt(t)?Ke(t):r,s=n?n[0]:t.charAt(0),a=n?Ct(n,1).join(""):t.slice(1);return s[e]()+a}}function zt(e){return function(t){return Sr(Cu(yu(t).replace(sf,"")),e,"")}}function An(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Yt(e.prototype),s=e.apply(n,t);return ne(s)?s:n}}function pc(e,t,n){var s=An(e);function a(){for(var f=arguments.length,c=y(f),g=f,v=Zt(a);g--;)c[g]=arguments[g];var T=f<3&&c[0]!==v&&c[f-1]!==v?[]:_t(c,v);if(f-=T.length,f<n)return Pa(e,t,vi,a.placeholder,r,c,T,r,r,n-f);var E=this&&this!==ce&&this instanceof a?s:e;return Te(E,this,c)}return a}function Sa(e){return function(t,n,s){var a=Z(t);if(!xe(t)){var f=G(n,3);t=fe(t),n=function(g){return f(a[g],g,a)}}var c=e(t,n,s);return c>-1?a[f?t[c]:c]:r}}function Ta(e){return rt(function(t){var n=t.length,s=n,a=Ge.prototype.thru;for(e&&t.reverse();s--;){var f=t[s];if(typeof f!="function")throw new De(d);if(a&&!c&&wi(f)=="wrapper")var c=new Ge([],!0)}for(s=c?s:n;++s<n;){f=t[s];var g=wi(f),v=g=="wrapper"?is(f):r;v&&as(v[0])&&v[1]==(Qe|ee|Le|an)&&!v[4].length&&v[9]==1?c=c[wi(v[0])].apply(c,v[3]):c=f.length==1&&as(f)?c[g]():c.thru(f)}return function(){var T=arguments,E=T[0];if(c&&T.length==1&&B(E))return c.plant(E).value();for(var A=0,L=n?t[A].apply(this,T):E;++A<n;)L=t[A].call(this,L);return L}})}function vi(e,t,n,s,a,f,c,g,v,T){var E=t&Qe,A=t&K,L=t&J,M=t&(ee|he),O=t&ir,W=L?r:An(e);function b(){for(var H=arguments.length,$=y(H),Fe=H;Fe--;)$[Fe]=arguments[Fe];if(M)var ye=Zt(b),Ie=Ff($,ye);if(s&&($=va($,s,a,M)),f&&($=ya($,f,c,M)),H-=Ie,M&&H<T){var se=_t($,ye);return Pa(e,t,vi,b.placeholder,n,$,se,g,v,T-H)}var Ve=A?n:this,ut=L?Ve[e]:e;return H=$.length,g?$=bc($,g):O&&H>1&&$.reverse(),E&&v<H&&($.length=v),this&&this!==ce&&this instanceof b&&(ut=W||An(ut)),ut.apply(Ve,$)}return b}function Ea(e,t){return function(n,s){return Hh(n,e,t(s),{})}}function yi(e,t){return function(n,s){var a;if(n===r&&s===r)return t;if(n!==r&&(a=n),s!==r){if(a===r)return s;typeof n=="string"||typeof s=="string"?(n=Ae(n),s=Ae(s)):(n=fa(n),s=fa(s)),a=e(n,s)}return a}}function jr(e){return rt(function(t){return t=te(t,Ee(G())),q(function(n){var s=this;return e(t,function(a){return Te(a,s,n)})})})}function Ci(e,t){t=t===r?" ":Ae(t);var n=t.length;if(n<2)return n?$r(t,e):t;var s=$r(t,oi(e/Kt(t)));return Wt(t)?Ct(Ke(s),0,e).join(""):s.slice(0,e)}function mc(e,t,n,s){var a=t&K,f=An(e);function c(){for(var g=-1,v=arguments.length,T=-1,E=s.length,A=y(E+v),L=this&&this!==ce&&this instanceof c?f:e;++T<E;)A[T]=s[T];for(;v--;)A[T++]=arguments[++g];return Te(L,a?n:this,A)}return c}function Aa(e){return function(t,n,s){return s&&typeof s!="number"&&ve(t,n,s)&&(n=s=r),t=at(t),n===r?(n=t,t=0):n=at(n),s=s===r?t<n?1:-1:at(s),nc(t,n,s,e)}}function xi(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Be(t),n=Be(n)),e(t,n)}}function Pa(e,t,n,s,a,f,c,g,v,T){var E=t&ee,A=E?c:r,L=E?r:c,M=E?f:r,O=E?r:f;t|=E?Le:on,t&=~(E?on:Le),t&ae||(t&=-4);var W=[e,t,a,M,A,O,L,g,v,T],b=n.apply(r,W);return as(e)&&ka(b,W),b.placeholder=s,Na(b,e,t)}function es(e){var t=ue[e];return function(n,s){if(n=Be(n),s=s==null?0:ge(N(s),292),s&&No(n)){var a=(X(n)+"e").split("e"),f=t(a[0]+"e"+(+a[1]+s));return a=(X(f)+"e").split("e"),+(a[0]+"e"+(+a[1]-s))}return t(n)}}var vc=Vt&&1/Zn(new Vt([,-0]))[1]==Tt?function(e){return new Vt(e)}:ws;function Fa(e){return function(t){var n=_e(t);return n==Ne?Lr(t):n==We?Of(t):Pf(t,e(t))}}function it(e,t,n,s,a,f,c,g){var v=t&J;if(!v&&typeof e!="function")throw new De(d);var T=s?s.length:0;if(T||(t&=-97,s=a=r),c=c===r?c:le(N(c),0),g=g===r?g:N(g),T-=a?a.length:0,t&on){var E=s,A=a;s=a=r}var L=v?r:is(e),M=[e,t,n,s,a,E,A,f,c,g];if(L&&Dc(M,L),e=M[0],t=M[1],n=M[2],s=M[3],a=M[4],g=M[9]=M[9]===r?v?0:e.length:le(M[9]-T,0),!g&&t&(ee|he)&&(t&=-25),!t||t==K)var O=_c(e,t,n);else t==ee||t==he?O=pc(e,t,g):(t==Le||t==(K|Le))&&!a.length?O=mc(e,t,n,s):O=vi.apply(r,M);var W=L?ua:ka;return Na(W(O,M),e,t)}function Ia(e,t,n,s){return e===r||He(e,Ht[n])&&!z.call(s,n)?t:e}function La(e,t,n,s,a,f){return ne(e)&&ne(t)&&(f.set(t,e),gi(e,t,r,La,f),f.delete(t)),e}function yc(e){return In(e)?r:e}function Ra(e,t,n,s,a,f){var c=n&D,g=e.length,v=t.length;if(g!=v&&!(c&&v>g))return!1;var T=f.get(e),E=f.get(t);if(T&&E)return T==t&&E==e;var A=-1,L=!0,M=n&k?new Ft:r;for(f.set(e,t),f.set(t,e);++A<g;){var O=e[A],W=t[A];if(s)var b=c?s(W,O,A,t,e,f):s(O,W,A,e,t,f);if(b!==r){if(b)continue;L=!1;break}if(M){if(!Tr(t,function(H,$){if(!_n(M,$)&&(O===H||a(O,H,n,s,f)))return M.push($)})){L=!1;break}}else if(!(O===W||a(O,W,n,s,f))){L=!1;break}}return f.delete(e),f.delete(t),L}function Cc(e,t,n,s,a,f,c){switch(n){case Bt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gn:return!(e.byteLength!=t.byteLength||!f(new ni(e),new ni(t)));case un:case ln:case fn:return He(+e,+t);case Kn:return e.name==t.name&&e.message==t.message;case hn:case cn:return e==t+"";case Ne:var g=Lr;case We:var v=s&D;if(g||(g=Zn),e.size!=t.size&&!v)return!1;var T=c.get(e);if(T)return T==t;s|=k,c.set(e,t);var E=Ra(g(e),g(t),s,a,f,c);return c.delete(e),E;case Hn:if(Cn)return Cn.call(e)==Cn.call(t)}return!1}function xc(e,t,n,s,a,f){var c=n&D,g=ts(e),v=g.length,T=ts(t),E=T.length;if(v!=E&&!c)return!1;for(var A=v;A--;){var L=g[A];if(!(c?L in t:z.call(t,L)))return!1}var M=f.get(e),O=f.get(t);if(M&&O)return M==t&&O==e;var W=!0;f.set(e,t),f.set(t,e);for(var b=c;++A<v;){L=g[A];var H=e[L],$=t[L];if(s)var Fe=c?s($,H,L,t,e,f):s(H,$,L,e,t,f);if(!(Fe===r?H===$||a(H,$,n,s,f):Fe)){W=!1;break}b||(b=L=="constructor")}if(W&&!b){var ye=e.constructor,Ie=t.constructor;ye!=Ie&&"constructor"in e&&"constructor"in t&&!(typeof ye=="function"&&ye instanceof ye&&typeof Ie=="function"&&Ie instanceof Ie)&&(W=!1)}return f.delete(e),f.delete(t),W}function rt(e){return ls(Ua(e,r,$a),e+"")}function ts(e){return Jo(e,fe,ss)}function ns(e){return Jo(e,we,Ma)}var is=ui?function(e){return ui.get(e)}:ws;function wi(e){for(var t=e.name+"",n=$t[t],s=z.call($t,t)?n.length:0;s--;){var a=n[s],f=a.func;if(f==null||f==e)return a.name}return t}function Zt(e){var t=z.call(l,"placeholder")?l:e;return t.placeholder}function G(){var e=l.iteratee||Cs;return e=e===Cs?ea:e,arguments.length?e(arguments[0],arguments[1]):e}function Si(e,t){var n=e.__data__;return Ic(t)?n[typeof t=="string"?"string":"hash"]:n.map}function rs(e){for(var t=fe(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,Oa(a)]}return t}function Rt(e,t){var n=Mf(e,t);return jo(n)?n:r}function wc(e){var t=z.call(e,At),n=e[At];try{e[At]=r;var s=!0}catch{}var a=ei.call(e);return s&&(t?e[At]=n:delete e[At]),a}var ss=Mr?function(e){return e==null?[]:(e=Z(e),dt(Mr(e),function(t){return Bo.call(e,t)}))}:Ss,Ma=Mr?function(e){for(var t=[];e;)gt(t,ss(e)),e=ii(e);return t}:Ss,_e=me;(Dr&&_e(new Dr(new ArrayBuffer(1)))!=Bt||mn&&_e(new mn)!=Ne||Gr&&_e(Gr.resolve())!=Ys||Vt&&_e(new Vt)!=We||vn&&_e(new vn)!=dn)&&(_e=function(e){var t=me(e),n=t==je?e.constructor:r,s=n?Mt(n):"";if(s)switch(s){case rh:return Bt;case sh:return Ne;case oh:return Ys;case ah:return We;case uh:return dn}return t});function Sc(e,t,n){for(var s=-1,a=n.length;++s<a;){var f=n[s],c=f.size;switch(f.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=ge(t,e+c);break;case"takeRight":e=le(e,t-c);break}}return{start:e,end:t}}function Tc(e){var t=e.match(Il);return t?t[1].split(Ll):[]}function Da(e,t,n){t=yt(t,e);for(var s=-1,a=t.length,f=!1;++s<a;){var c=Ze(t[s]);if(!(f=e!=null&&n(e,c)))break;e=e[c]}return f||++s!=a?f:(a=e==null?0:e.length,!!a&&Li(a)&&st(c,a)&&(B(e)||Dt(e)))}function Ec(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&z.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Ga(e){return typeof e.constructor=="function"&&!Pn(e)?Yt(ii(e)):{}}function Ac(e,t,n){var s=e.constructor;switch(t){case gn:return Qr(e);case un:case ln:return new s(+e);case Bt:return lc(e,n);case rr:case sr:case or:case ar:case ur:case lr:case fr:case hr:case cr:return pa(e,n);case Ne:return new s;case fn:case cn:return new s(e);case hn:return fc(e);case We:return new s;case Hn:return hc(e)}}function Pc(e,t){var n=t.length;if(!n)return e;var s=n-1;return t[s]=(n>1?"& ":"")+t[s],t=t.join(n>2?", ":" "),e.replace(Fl,`{
/* [wrapped with `+t+`] */
`)}function Fc(e){return B(e)||Dt(e)||!!(ko&&e&&e[ko])}function st(e,t){var n=typeof e;return t=t??ct,!!t&&(n=="number"||n!="symbol"&&kl.test(e))&&e>-1&&e%1==0&&e<t}function ve(e,t,n){if(!ne(n))return!1;var s=typeof t;return(s=="number"?xe(n)&&st(t,n.length):s=="string"&&t in n)?He(n[t],e):!1}function os(e,t){if(B(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Pe(e)?!0:Tl.test(e)||!Sl.test(e)||t!=null&&e in Z(t)}function Ic(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function as(e){var t=wi(e),n=l[t];if(typeof n!="function"||!(t in V.prototype))return!1;if(e===n)return!0;var s=is(n);return!!s&&e===s[0]}function Lc(e){return!!Oo&&Oo in e}var Rc=Qn?ot:Ts;function Pn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ht;return e===n}function Oa(e){return e===e&&!ne(e)}function ba(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Z(n))}}function Mc(e){var t=Fi(e,function(s){return n.size===x&&n.clear(),s}),n=t.cache;return t}function Dc(e,t){var n=e[1],s=t[1],a=n|s,f=a<(K|J|Qe),c=s==Qe&&n==ee||s==Qe&&n==an&&e[7].length<=t[8]||s==(Qe|an)&&t[7].length<=t[8]&&n==ee;if(!(f||c))return e;s&K&&(e[2]=t[2],a|=n&K?0:ae);var g=t[3];if(g){var v=e[3];e[3]=v?va(v,g,t[4]):g,e[4]=v?_t(e[3],S):t[4]}return g=t[5],g&&(v=e[5],e[5]=v?ya(v,g,t[6]):g,e[6]=v?_t(e[5],S):t[6]),g=t[7],g&&(e[7]=g),s&Qe&&(e[8]=e[8]==null?t[8]:ge(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function Gc(e){var t=[];if(e!=null)for(var n in Z(e))t.push(n);return t}function Oc(e){return ei.call(e)}function Ua(e,t,n){return t=le(t===r?e.length-1:t,0),function(){for(var s=arguments,a=-1,f=le(s.length-t,0),c=y(f);++a<f;)c[a]=s[t+a];a=-1;for(var g=y(t+1);++a<t;)g[a]=s[a];return g[t]=n(c),Te(e,this,g)}}function Ba(e,t){return t.length<2?e:Lt(e,be(t,0,-1))}function bc(e,t){for(var n=e.length,s=ge(t.length,n),a=Ce(e);s--;){var f=t[s];e[s]=st(f,n)?a[f]:r}return e}function us(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ka=Wa(ua),Fn=Jf||function(e,t){return ce.setTimeout(e,t)},ls=Wa(sc);function Na(e,t,n){var s=t+"";return ls(e,Pc(s,Uc(Tc(s),n)))}function Wa(e){var t=0,n=0;return function(){var s=th(),a=il-(s-n);if(n=s,a>0){if(++t>=nl)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Ti(e,t){var n=-1,s=e.length,a=s-1;for(t=t===r?s:t;++n<t;){var f=Vr(n,a),c=e[f];e[f]=e[n],e[n]=c}return e.length=t,e}var Ka=Mc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(El,function(n,s,a,f){t.push(a?f.replace(Dl,"$1"):s||n)}),t});function Ze(e){if(typeof e=="string"||Pe(e))return e;var t=e+"";return t=="0"&&1/e==-Tt?"-0":t}function Mt(e){if(e!=null){try{return jn.call(e)}catch{}try{return e+""}catch{}}return""}function Uc(e,t){return Me(ll,function(n){var s="_."+n[0];t&n[1]&&!Xn(e,s)&&e.push(s)}),e.sort()}function qa(e){if(e instanceof V)return e.clone();var t=new Ge(e.__wrapped__,e.__chain__);return t.__actions__=Ce(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Bc(e,t,n){(n?ve(e,t,n):t===r)?t=1:t=le(N(t),0);var s=e==null?0:e.length;if(!s||t<1)return[];for(var a=0,f=0,c=y(oi(s/t));a<s;)c[f++]=be(e,a,a+=t);return c}function kc(e){for(var t=-1,n=e==null?0:e.length,s=0,a=[];++t<n;){var f=e[t];f&&(a[s++]=f)}return a}function Nc(){var e=arguments.length;if(!e)return[];for(var t=y(e-1),n=arguments[0],s=e;s--;)t[s-1]=arguments[s];return gt(B(n)?Ce(n):[n],de(t,1))}var Wc=q(function(e,t){return re(e)?wn(e,de(t,1,re,!0)):[]}),Kc=q(function(e,t){var n=Ue(t);return re(n)&&(n=r),re(e)?wn(e,de(t,1,re,!0),G(n,2)):[]}),qc=q(function(e,t){var n=Ue(t);return re(n)&&(n=r),re(e)?wn(e,de(t,1,re,!0),r,n):[]});function Hc(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===r?1:N(t),be(e,t<0?0:t,s)):[]}function Vc(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===r?1:N(t),t=s-t,be(e,0,t<0?0:t)):[]}function $c(e,t){return e&&e.length?pi(e,G(t,3),!0,!0):[]}function Yc(e,t){return e&&e.length?pi(e,G(t,3),!0):[]}function Xc(e,t,n,s){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&ve(e,t,n)&&(n=0,s=a),Nh(e,t,n,s)):[]}function Ha(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:N(n);return a<0&&(a=le(s+a,0)),zn(e,G(t,3),a)}function Va(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=s-1;return n!==r&&(a=N(n),a=n<0?le(s+a,0):ge(a,s-1)),zn(e,G(t,3),a,!0)}function $a(e){var t=e==null?0:e.length;return t?de(e,1):[]}function zc(e){var t=e==null?0:e.length;return t?de(e,Tt):[]}function Zc(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:N(t),de(e,t)):[]}function Jc(e){for(var t=-1,n=e==null?0:e.length,s={};++t<n;){var a=e[t];s[a[0]]=a[1]}return s}function Ya(e){return e&&e.length?e[0]:r}function Qc(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:N(n);return a<0&&(a=le(s+a,0)),Nt(e,t,a)}function jc(e){var t=e==null?0:e.length;return t?be(e,0,-1):[]}var ed=q(function(e){var t=te(e,Zr);return t.length&&t[0]===e[0]?Nr(t):[]}),td=q(function(e){var t=Ue(e),n=te(e,Zr);return t===Ue(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Nr(n,G(t,2)):[]}),nd=q(function(e){var t=Ue(e),n=te(e,Zr);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Nr(n,r,t):[]});function id(e,t){return e==null?"":jf.call(e,t)}function Ue(e){var t=e==null?0:e.length;return t?e[t-1]:r}function rd(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=s;return n!==r&&(a=N(n),a=a<0?le(s+a,0):ge(a,s-1)),t===t?Uf(e,t,a):zn(e,Po,a,!0)}function sd(e,t){return e&&e.length?ra(e,N(t)):r}var od=q(Xa);function Xa(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}function ad(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,G(n,2)):e}function ud(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,r,n):e}var ld=rt(function(e,t){var n=e==null?0:e.length,s=br(e,t);return aa(e,te(t,function(a){return st(a,n)?+a:a}).sort(ma)),s});function fd(e,t){var n=[];if(!(e&&e.length))return n;var s=-1,a=[],f=e.length;for(t=G(t,3);++s<f;){var c=e[s];t(c,s,e)&&(n.push(c),a.push(s))}return aa(e,a),n}function fs(e){return e==null?e:ih.call(e)}function hd(e,t,n){var s=e==null?0:e.length;return s?(n&&typeof n!="number"&&ve(e,t,n)?(t=0,n=s):(t=t==null?0:N(t),n=n===r?s:N(n)),be(e,t,n)):[]}function cd(e,t){return _i(e,t)}function dd(e,t,n){return Yr(e,t,G(n,2))}function gd(e,t){var n=e==null?0:e.length;if(n){var s=_i(e,t);if(s<n&&He(e[s],t))return s}return-1}function _d(e,t){return _i(e,t,!0)}function pd(e,t,n){return Yr(e,t,G(n,2),!0)}function md(e,t){var n=e==null?0:e.length;if(n){var s=_i(e,t,!0)-1;if(He(e[s],t))return s}return-1}function vd(e){return e&&e.length?la(e):[]}function yd(e,t){return e&&e.length?la(e,G(t,2)):[]}function Cd(e){var t=e==null?0:e.length;return t?be(e,1,t):[]}function xd(e,t,n){return e&&e.length?(t=n||t===r?1:N(t),be(e,0,t<0?0:t)):[]}function wd(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===r?1:N(t),t=s-t,be(e,t<0?0:t,s)):[]}function Sd(e,t){return e&&e.length?pi(e,G(t,3),!1,!0):[]}function Td(e,t){return e&&e.length?pi(e,G(t,3)):[]}var Ed=q(function(e){return vt(de(e,1,re,!0))}),Ad=q(function(e){var t=Ue(e);return re(t)&&(t=r),vt(de(e,1,re,!0),G(t,2))}),Pd=q(function(e){var t=Ue(e);return t=typeof t=="function"?t:r,vt(de(e,1,re,!0),r,t)});function Fd(e){return e&&e.length?vt(e):[]}function Id(e,t){return e&&e.length?vt(e,G(t,2)):[]}function Ld(e,t){return t=typeof t=="function"?t:r,e&&e.length?vt(e,r,t):[]}function hs(e){if(!(e&&e.length))return[];var t=0;return e=dt(e,function(n){if(re(n))return t=le(n.length,t),!0}),Fr(t,function(n){return te(e,Er(n))})}function za(e,t){if(!(e&&e.length))return[];var n=hs(e);return t==null?n:te(n,function(s){return Te(t,r,s)})}var Rd=q(function(e,t){return re(e)?wn(e,t):[]}),Md=q(function(e){return zr(dt(e,re))}),Dd=q(function(e){var t=Ue(e);return re(t)&&(t=r),zr(dt(e,re),G(t,2))}),Gd=q(function(e){var t=Ue(e);return t=typeof t=="function"?t:r,zr(dt(e,re),r,t)}),Od=q(hs);function bd(e,t){return da(e||[],t||[],xn)}function Ud(e,t){return da(e||[],t||[],En)}var Bd=q(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,za(e,n)});function Za(e){var t=l(e);return t.__chain__=!0,t}function kd(e,t){return t(e),e}function Ei(e,t){return t(e)}var Nd=rt(function(e){var t=e.length,n=t?e[0]:0,s=this.__wrapped__,a=function(f){return br(f,e)};return t>1||this.__actions__.length||!(s instanceof V)||!st(n)?this.thru(a):(s=s.slice(n,+n+(t?1:0)),s.__actions__.push({func:Ei,args:[a],thisArg:r}),new Ge(s,this.__chain__).thru(function(f){return t&&!f.length&&f.push(r),f}))});function Wd(){return Za(this)}function Kd(){return new Ge(this.value(),this.__chain__)}function qd(){this.__values__===r&&(this.__values__=fu(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Hd(){return this}function Vd(e){for(var t,n=this;n instanceof fi;){var s=qa(n);s.__index__=0,s.__values__=r,t?a.__wrapped__=s:t=s;var a=s;n=n.__wrapped__}return a.__wrapped__=e,t}function $d(){var e=this.__wrapped__;if(e instanceof V){var t=e;return this.__actions__.length&&(t=new V(this)),t=t.reverse(),t.__actions__.push({func:Ei,args:[fs],thisArg:r}),new Ge(t,this.__chain__)}return this.thru(fs)}function Yd(){return ca(this.__wrapped__,this.__actions__)}var Xd=mi(function(e,t,n){z.call(e,n)?++e[n]:nt(e,n,1)});function zd(e,t,n){var s=B(e)?Eo:kh;return n&&ve(e,t,n)&&(t=r),s(e,G(t,3))}function Zd(e,t){var n=B(e)?dt:zo;return n(e,G(t,3))}var Jd=Sa(Ha),Qd=Sa(Va);function jd(e,t){return de(Ai(e,t),1)}function eg(e,t){return de(Ai(e,t),Tt)}function tg(e,t,n){return n=n===r?1:N(n),de(Ai(e,t),n)}function Ja(e,t){var n=B(e)?Me:mt;return n(e,G(t,3))}function Qa(e,t){var n=B(e)?Cf:Xo;return n(e,G(t,3))}var ng=mi(function(e,t,n){z.call(e,n)?e[n].push(t):nt(e,n,[t])});function ig(e,t,n,s){e=xe(e)?e:Qt(e),n=n&&!s?N(n):0;var a=e.length;return n<0&&(n=le(a+n,0)),Ri(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&Nt(e,t,n)>-1}var rg=q(function(e,t,n){var s=-1,a=typeof t=="function",f=xe(e)?y(e.length):[];return mt(e,function(c){f[++s]=a?Te(t,c,n):Sn(c,t,n)}),f}),sg=mi(function(e,t,n){nt(e,n,t)});function Ai(e,t){var n=B(e)?te:ta;return n(e,G(t,3))}function og(e,t,n,s){return e==null?[]:(B(t)||(t=t==null?[]:[t]),n=s?r:n,B(n)||(n=n==null?[]:[n]),sa(e,t,n))}var ag=mi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function ug(e,t,n){var s=B(e)?Sr:Io,a=arguments.length<3;return s(e,G(t,4),n,a,mt)}function lg(e,t,n){var s=B(e)?xf:Io,a=arguments.length<3;return s(e,G(t,4),n,a,Xo)}function fg(e,t){var n=B(e)?dt:zo;return n(e,Ii(G(t,3)))}function hg(e){var t=B(e)?Ho:ic;return t(e)}function cg(e,t,n){(n?ve(e,t,n):t===r)?t=1:t=N(t);var s=B(e)?Gh:rc;return s(e,t)}function dg(e){var t=B(e)?Oh:oc;return t(e)}function gg(e){if(e==null)return 0;if(xe(e))return Ri(e)?Kt(e):e.length;var t=_e(e);return t==Ne||t==We?e.size:Kr(e).length}function _g(e,t,n){var s=B(e)?Tr:ac;return n&&ve(e,t,n)&&(t=r),s(e,G(t,3))}var pg=q(function(e,t){if(e==null)return[];var n=t.length;return n>1&&ve(e,t[0],t[1])?t=[]:n>2&&ve(t[0],t[1],t[2])&&(t=[t[0]]),sa(e,de(t,1),[])}),Pi=Zf||function(){return ce.Date.now()};function mg(e,t){if(typeof t!="function")throw new De(d);return e=N(e),function(){if(--e<1)return t.apply(this,arguments)}}function ja(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,it(e,Qe,r,r,r,r,t)}function eu(e,t){var n;if(typeof t!="function")throw new De(d);return e=N(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var cs=q(function(e,t,n){var s=K;if(n.length){var a=_t(n,Zt(cs));s|=Le}return it(e,s,t,n,a)}),tu=q(function(e,t,n){var s=K|J;if(n.length){var a=_t(n,Zt(tu));s|=Le}return it(t,s,e,n,a)});function nu(e,t,n){t=n?r:t;var s=it(e,ee,r,r,r,r,r,t);return s.placeholder=nu.placeholder,s}function iu(e,t,n){t=n?r:t;var s=it(e,he,r,r,r,r,r,t);return s.placeholder=iu.placeholder,s}function ru(e,t,n){var s,a,f,c,g,v,T=0,E=!1,A=!1,L=!0;if(typeof e!="function")throw new De(d);t=Be(t)||0,ne(n)&&(E=!!n.leading,A="maxWait"in n,f=A?le(Be(n.maxWait)||0,t):f,L="trailing"in n?!!n.trailing:L);function M(se){var Ve=s,ut=a;return s=a=r,T=se,c=e.apply(ut,Ve),c}function O(se){return T=se,g=Fn(H,t),E?M(se):c}function W(se){var Ve=se-v,ut=se-T,Su=t-Ve;return A?ge(Su,f-ut):Su}function b(se){var Ve=se-v,ut=se-T;return v===r||Ve>=t||Ve<0||A&&ut>=f}function H(){var se=Pi();if(b(se))return $(se);g=Fn(H,W(se))}function $(se){return g=r,L&&s?M(se):(s=a=r,c)}function Fe(){g!==r&&ga(g),T=0,s=v=a=g=r}function ye(){return g===r?c:$(Pi())}function Ie(){var se=Pi(),Ve=b(se);if(s=arguments,a=this,v=se,Ve){if(g===r)return O(v);if(A)return ga(g),g=Fn(H,t),M(v)}return g===r&&(g=Fn(H,t)),c}return Ie.cancel=Fe,Ie.flush=ye,Ie}var vg=q(function(e,t){return Yo(e,1,t)}),yg=q(function(e,t,n){return Yo(e,Be(t)||0,n)});function Cg(e){return it(e,ir)}function Fi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new De(d);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],f=n.cache;if(f.has(a))return f.get(a);var c=e.apply(this,s);return n.cache=f.set(a,c)||f,c};return n.cache=new(Fi.Cache||tt),n}Fi.Cache=tt;function Ii(e){if(typeof e!="function")throw new De(d);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function xg(e){return eu(2,e)}var wg=uc(function(e,t){t=t.length==1&&B(t[0])?te(t[0],Ee(G())):te(de(t,1),Ee(G()));var n=t.length;return q(function(s){for(var a=-1,f=ge(s.length,n);++a<f;)s[a]=t[a].call(this,s[a]);return Te(e,this,s)})}),ds=q(function(e,t){var n=_t(t,Zt(ds));return it(e,Le,r,t,n)}),su=q(function(e,t){var n=_t(t,Zt(su));return it(e,on,r,t,n)}),Sg=rt(function(e,t){return it(e,an,r,r,r,t)});function Tg(e,t){if(typeof e!="function")throw new De(d);return t=t===r?t:N(t),q(e,t)}function Eg(e,t){if(typeof e!="function")throw new De(d);return t=t==null?0:le(N(t),0),q(function(n){var s=n[t],a=Ct(n,0,t);return s&&gt(a,s),Te(e,this,a)})}function Ag(e,t,n){var s=!0,a=!0;if(typeof e!="function")throw new De(d);return ne(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),ru(e,t,{leading:s,maxWait:t,trailing:a})}function Pg(e){return ja(e,1)}function Fg(e,t){return ds(Jr(t),e)}function Ig(){if(!arguments.length)return[];var e=arguments[0];return B(e)?e:[e]}function Lg(e){return Oe(e,F)}function Rg(e,t){return t=typeof t=="function"?t:r,Oe(e,F,t)}function Mg(e){return Oe(e,I|F)}function Dg(e,t){return t=typeof t=="function"?t:r,Oe(e,I|F,t)}function Gg(e,t){return t==null||$o(e,t,fe(t))}function He(e,t){return e===t||e!==e&&t!==t}var Og=xi(kr),bg=xi(function(e,t){return e>=t}),Dt=Qo(function(){return arguments}())?Qo:function(e){return ie(e)&&z.call(e,"callee")&&!Bo.call(e,"callee")},B=y.isArray,Ug=yo?Ee(yo):Vh;function xe(e){return e!=null&&Li(e.length)&&!ot(e)}function re(e){return ie(e)&&xe(e)}function Bg(e){return e===!0||e===!1||ie(e)&&me(e)==un}var xt=Qf||Ts,kg=Co?Ee(Co):$h;function Ng(e){return ie(e)&&e.nodeType===1&&!In(e)}function Wg(e){if(e==null)return!0;if(xe(e)&&(B(e)||typeof e=="string"||typeof e.splice=="function"||xt(e)||Jt(e)||Dt(e)))return!e.length;var t=_e(e);if(t==Ne||t==We)return!e.size;if(Pn(e))return!Kr(e).length;for(var n in e)if(z.call(e,n))return!1;return!0}function Kg(e,t){return Tn(e,t)}function qg(e,t,n){n=typeof n=="function"?n:r;var s=n?n(e,t):r;return s===r?Tn(e,t,r,n):!!s}function gs(e){if(!ie(e))return!1;var t=me(e);return t==Kn||t==hl||typeof e.message=="string"&&typeof e.name=="string"&&!In(e)}function Hg(e){return typeof e=="number"&&No(e)}function ot(e){if(!ne(e))return!1;var t=me(e);return t==qn||t==$s||t==fl||t==dl}function ou(e){return typeof e=="number"&&e==N(e)}function Li(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ct}function ne(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function ie(e){return e!=null&&typeof e=="object"}var au=xo?Ee(xo):Xh;function Vg(e,t){return e===t||Wr(e,t,rs(t))}function $g(e,t,n){return n=typeof n=="function"?n:r,Wr(e,t,rs(t),n)}function Yg(e){return uu(e)&&e!=+e}function Xg(e){if(Rc(e))throw new U(h);return jo(e)}function zg(e){return e===null}function Zg(e){return e==null}function uu(e){return typeof e=="number"||ie(e)&&me(e)==fn}function In(e){if(!ie(e)||me(e)!=je)return!1;var t=ii(e);if(t===null)return!0;var n=z.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&jn.call(n)==$f}var _s=wo?Ee(wo):zh;function Jg(e){return ou(e)&&e>=-ct&&e<=ct}var lu=So?Ee(So):Zh;function Ri(e){return typeof e=="string"||!B(e)&&ie(e)&&me(e)==cn}function Pe(e){return typeof e=="symbol"||ie(e)&&me(e)==Hn}var Jt=To?Ee(To):Jh;function Qg(e){return e===r}function jg(e){return ie(e)&&_e(e)==dn}function e_(e){return ie(e)&&me(e)==_l}var t_=xi(qr),n_=xi(function(e,t){return e<=t});function fu(e){if(!e)return[];if(xe(e))return Ri(e)?Ke(e):Ce(e);if(pn&&e[pn])return Gf(e[pn]());var t=_e(e),n=t==Ne?Lr:t==We?Zn:Qt;return n(e)}function at(e){if(!e)return e===0?e:0;if(e=Be(e),e===Tt||e===-Tt){var t=e<0?-1:1;return t*ol}return e===e?e:0}function N(e){var t=at(e),n=t%1;return t===t?n?t-n:t:0}function hu(e){return e?It(N(e),0,Ye):0}function Be(e){if(typeof e=="number")return e;if(Pe(e))return Nn;if(ne(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ne(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Lo(e);var n=bl.test(e);return n||Bl.test(e)?mf(e.slice(2),n?2:8):Ol.test(e)?Nn:+e}function cu(e){return ze(e,we(e))}function i_(e){return e?It(N(e),-ct,ct):e===0?e:0}function X(e){return e==null?"":Ae(e)}var r_=Xt(function(e,t){if(Pn(t)||xe(t)){ze(t,fe(t),e);return}for(var n in t)z.call(t,n)&&xn(e,n,t[n])}),du=Xt(function(e,t){ze(t,we(t),e)}),Mi=Xt(function(e,t,n,s){ze(t,we(t),e,s)}),s_=Xt(function(e,t,n,s){ze(t,fe(t),e,s)}),o_=rt(br);function a_(e,t){var n=Yt(e);return t==null?n:Vo(n,t)}var u_=q(function(e,t){e=Z(e);var n=-1,s=t.length,a=s>2?t[2]:r;for(a&&ve(t[0],t[1],a)&&(s=1);++n<s;)for(var f=t[n],c=we(f),g=-1,v=c.length;++g<v;){var T=c[g],E=e[T];(E===r||He(E,Ht[T])&&!z.call(e,T))&&(e[T]=f[T])}return e}),l_=q(function(e){return e.push(r,La),Te(gu,r,e)});function f_(e,t){return Ao(e,G(t,3),Xe)}function h_(e,t){return Ao(e,G(t,3),Br)}function c_(e,t){return e==null?e:Ur(e,G(t,3),we)}function d_(e,t){return e==null?e:Zo(e,G(t,3),we)}function g_(e,t){return e&&Xe(e,G(t,3))}function __(e,t){return e&&Br(e,G(t,3))}function p_(e){return e==null?[]:di(e,fe(e))}function m_(e){return e==null?[]:di(e,we(e))}function ps(e,t,n){var s=e==null?r:Lt(e,t);return s===r?n:s}function v_(e,t){return e!=null&&Da(e,t,Wh)}function ms(e,t){return e!=null&&Da(e,t,Kh)}var y_=Ea(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ei.call(t)),e[t]=n},ys(Se)),C_=Ea(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ei.call(t)),z.call(e,t)?e[t].push(n):e[t]=[n]},G),x_=q(Sn);function fe(e){return xe(e)?qo(e):Kr(e)}function we(e){return xe(e)?qo(e,!0):Qh(e)}function w_(e,t){var n={};return t=G(t,3),Xe(e,function(s,a,f){nt(n,t(s,a,f),s)}),n}function S_(e,t){var n={};return t=G(t,3),Xe(e,function(s,a,f){nt(n,a,t(s,a,f))}),n}var T_=Xt(function(e,t,n){gi(e,t,n)}),gu=Xt(function(e,t,n,s){gi(e,t,n,s)}),E_=rt(function(e,t){var n={};if(e==null)return n;var s=!1;t=te(t,function(f){return f=yt(f,e),s||(s=f.length>1),f}),ze(e,ns(e),n),s&&(n=Oe(n,I|P|F,yc));for(var a=t.length;a--;)Xr(n,t[a]);return n});function A_(e,t){return _u(e,Ii(G(t)))}var P_=rt(function(e,t){return e==null?{}:ec(e,t)});function _u(e,t){if(e==null)return{};var n=te(ns(e),function(s){return[s]});return t=G(t),oa(e,n,function(s,a){return t(s,a[0])})}function F_(e,t,n){t=yt(t,e);var s=-1,a=t.length;for(a||(a=1,e=r);++s<a;){var f=e==null?r:e[Ze(t[s])];f===r&&(s=a,f=n),e=ot(f)?f.call(e):f}return e}function I_(e,t,n){return e==null?e:En(e,t,n)}function L_(e,t,n,s){return s=typeof s=="function"?s:r,e==null?e:En(e,t,n,s)}var pu=Fa(fe),mu=Fa(we);function R_(e,t,n){var s=B(e),a=s||xt(e)||Jt(e);if(t=G(t,4),n==null){var f=e&&e.constructor;a?n=s?new f:[]:ne(e)?n=ot(f)?Yt(ii(e)):{}:n={}}return(a?Me:Xe)(e,function(c,g,v){return t(n,c,g,v)}),n}function M_(e,t){return e==null?!0:Xr(e,t)}function D_(e,t,n){return e==null?e:ha(e,t,Jr(n))}function G_(e,t,n,s){return s=typeof s=="function"?s:r,e==null?e:ha(e,t,Jr(n),s)}function Qt(e){return e==null?[]:Ir(e,fe(e))}function O_(e){return e==null?[]:Ir(e,we(e))}function b_(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Be(n),n=n===n?n:0),t!==r&&(t=Be(t),t=t===t?t:0),It(Be(e),t,n)}function U_(e,t,n){return t=at(t),n===r?(n=t,t=0):n=at(n),e=Be(e),qh(e,t,n)}function B_(e,t,n){if(n&&typeof n!="boolean"&&ve(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=at(e),t===r?(t=e,e=0):t=at(t)),e>t){var s=e;e=t,t=s}if(n||e%1||t%1){var a=Wo();return ge(e+a*(t-e+pf("1e-"+((a+"").length-1))),t)}return Vr(e,t)}var k_=zt(function(e,t,n){return t=t.toLowerCase(),e+(n?vu(t):t)});function vu(e){return vs(X(e).toLowerCase())}function yu(e){return e=X(e),e&&e.replace(Nl,If).replace(of,"")}function N_(e,t,n){e=X(e),t=Ae(t);var s=e.length;n=n===r?s:It(N(n),0,s);var a=n;return n-=t.length,n>=0&&e.slice(n,a)==t}function W_(e){return e=X(e),e&&Cl.test(e)?e.replace(zs,Lf):e}function K_(e){return e=X(e),e&&Al.test(e)?e.replace(dr,"\\$&"):e}var q_=zt(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),H_=zt(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),V_=wa("toLowerCase");function $_(e,t,n){e=X(e),t=N(t);var s=t?Kt(e):0;if(!t||s>=t)return e;var a=(t-s)/2;return Ci(ai(a),n)+e+Ci(oi(a),n)}function Y_(e,t,n){e=X(e),t=N(t);var s=t?Kt(e):0;return t&&s<t?e+Ci(t-s,n):e}function X_(e,t,n){e=X(e),t=N(t);var s=t?Kt(e):0;return t&&s<t?Ci(t-s,n)+e:e}function z_(e,t,n){return n||t==null?t=0:t&&(t=+t),nh(X(e).replace(gr,""),t||0)}function Z_(e,t,n){return(n?ve(e,t,n):t===r)?t=1:t=N(t),$r(X(e),t)}function J_(){var e=arguments,t=X(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Q_=zt(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function j_(e,t,n){return n&&typeof n!="number"&&ve(e,t,n)&&(t=n=r),n=n===r?Ye:n>>>0,n?(e=X(e),e&&(typeof t=="string"||t!=null&&!_s(t))&&(t=Ae(t),!t&&Wt(e))?Ct(Ke(e),0,n):e.split(t,n)):[]}var ep=zt(function(e,t,n){return e+(n?" ":"")+vs(t)});function tp(e,t,n){return e=X(e),n=n==null?0:It(N(n),0,e.length),t=Ae(t),e.slice(n,n+t.length)==t}function np(e,t,n){var s=l.templateSettings;n&&ve(e,t,n)&&(t=r),e=X(e),t=Mi({},t,s,Ia);var a=Mi({},t.imports,s.imports,Ia),f=fe(a),c=Ir(a,f),g,v,T=0,E=t.interpolate||Vn,A="__p += '",L=Rr((t.escape||Vn).source+"|"+E.source+"|"+(E===Zs?Gl:Vn).source+"|"+(t.evaluate||Vn).source+"|$","g"),M="//# sourceURL="+(z.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++hf+"]")+`
`;e.replace(L,function(b,H,$,Fe,ye,Ie){return $||($=Fe),A+=e.slice(T,Ie).replace(Wl,Rf),H&&(g=!0,A+=`' +
__e(`+H+`) +
'`),ye&&(v=!0,A+=`';
`+ye+`;
__p += '`),$&&(A+=`' +
((__t = (`+$+`)) == null ? '' : __t) +
'`),T=Ie+b.length,b}),A+=`';
`;var O=z.call(t,"variable")&&t.variable;if(!O)A=`with (obj) {
`+A+`
}
`;else if(Ml.test(O))throw new U(_);A=(v?A.replace(pl,""):A).replace(ml,"$1").replace(vl,"$1;"),A="function("+(O||"obj")+`) {
`+(O?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(g?", __e = _.escape":"")+(v?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+A+`return __p
}`;var W=xu(function(){return Y(f,M+"return "+A).apply(r,c)});if(W.source=A,gs(W))throw W;return W}function ip(e){return X(e).toLowerCase()}function rp(e){return X(e).toUpperCase()}function sp(e,t,n){if(e=X(e),e&&(n||t===r))return Lo(e);if(!e||!(t=Ae(t)))return e;var s=Ke(e),a=Ke(t),f=Ro(s,a),c=Mo(s,a)+1;return Ct(s,f,c).join("")}function op(e,t,n){if(e=X(e),e&&(n||t===r))return e.slice(0,Go(e)+1);if(!e||!(t=Ae(t)))return e;var s=Ke(e),a=Mo(s,Ke(t))+1;return Ct(s,0,a).join("")}function ap(e,t,n){if(e=X(e),e&&(n||t===r))return e.replace(gr,"");if(!e||!(t=Ae(t)))return e;var s=Ke(e),a=Ro(s,Ke(t));return Ct(s,a).join("")}function up(e,t){var n=el,s=tl;if(ne(t)){var a="separator"in t?t.separator:a;n="length"in t?N(t.length):n,s="omission"in t?Ae(t.omission):s}e=X(e);var f=e.length;if(Wt(e)){var c=Ke(e);f=c.length}if(n>=f)return e;var g=n-Kt(s);if(g<1)return s;var v=c?Ct(c,0,g).join(""):e.slice(0,g);if(a===r)return v+s;if(c&&(g+=v.length-g),_s(a)){if(e.slice(g).search(a)){var T,E=v;for(a.global||(a=Rr(a.source,X(Js.exec(a))+"g")),a.lastIndex=0;T=a.exec(E);)var A=T.index;v=v.slice(0,A===r?g:A)}}else if(e.indexOf(Ae(a),g)!=g){var L=v.lastIndexOf(a);L>-1&&(v=v.slice(0,L))}return v+s}function lp(e){return e=X(e),e&&yl.test(e)?e.replace(Xs,Bf):e}var fp=zt(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),vs=wa("toUpperCase");function Cu(e,t,n){return e=X(e),t=n?r:t,t===r?Df(e)?Wf(e):Tf(e):e.match(t)||[]}var xu=q(function(e,t){try{return Te(e,r,t)}catch(n){return gs(n)?n:new U(n)}}),hp=rt(function(e,t){return Me(t,function(n){n=Ze(n),nt(e,n,cs(e[n],e))}),e});function cp(e){var t=e==null?0:e.length,n=G();return e=t?te(e,function(s){if(typeof s[1]!="function")throw new De(d);return[n(s[0]),s[1]]}):[],q(function(s){for(var a=-1;++a<t;){var f=e[a];if(Te(f[0],this,s))return Te(f[1],this,s)}})}function dp(e){return Bh(Oe(e,I))}function ys(e){return function(){return e}}function gp(e,t){return e==null||e!==e?t:e}var _p=Ta(),pp=Ta(!0);function Se(e){return e}function Cs(e){return ea(typeof e=="function"?e:Oe(e,I))}function mp(e){return na(Oe(e,I))}function vp(e,t){return ia(e,Oe(t,I))}var yp=q(function(e,t){return function(n){return Sn(n,e,t)}}),Cp=q(function(e,t){return function(n){return Sn(e,n,t)}});function xs(e,t,n){var s=fe(t),a=di(t,s);n==null&&!(ne(t)&&(a.length||!s.length))&&(n=t,t=e,e=this,a=di(t,fe(t)));var f=!(ne(n)&&"chain"in n)||!!n.chain,c=ot(e);return Me(a,function(g){var v=t[g];e[g]=v,c&&(e.prototype[g]=function(){var T=this.__chain__;if(f||T){var E=e(this.__wrapped__),A=E.__actions__=Ce(this.__actions__);return A.push({func:v,args:arguments,thisArg:e}),E.__chain__=T,E}return v.apply(e,gt([this.value()],arguments))})}),e}function xp(){return ce._===this&&(ce._=Yf),this}function ws(){}function wp(e){return e=N(e),q(function(t){return ra(t,e)})}var Sp=jr(te),Tp=jr(Eo),Ep=jr(Tr);function wu(e){return os(e)?Er(Ze(e)):tc(e)}function Ap(e){return function(t){return e==null?r:Lt(e,t)}}var Pp=Aa(),Fp=Aa(!0);function Ss(){return[]}function Ts(){return!1}function Ip(){return{}}function Lp(){return""}function Rp(){return!0}function Mp(e,t){if(e=N(e),e<1||e>ct)return[];var n=Ye,s=ge(e,Ye);t=G(t),e-=Ye;for(var a=Fr(s,t);++n<e;)t(n);return a}function Dp(e){return B(e)?te(e,Ze):Pe(e)?[e]:Ce(Ka(X(e)))}function Gp(e){var t=++Vf;return X(e)+t}var Op=yi(function(e,t){return e+t},0),bp=es("ceil"),Up=yi(function(e,t){return e/t},1),Bp=es("floor");function kp(e){return e&&e.length?ci(e,Se,kr):r}function Np(e,t){return e&&e.length?ci(e,G(t,2),kr):r}function Wp(e){return Fo(e,Se)}function Kp(e,t){return Fo(e,G(t,2))}function qp(e){return e&&e.length?ci(e,Se,qr):r}function Hp(e,t){return e&&e.length?ci(e,G(t,2),qr):r}var Vp=yi(function(e,t){return e*t},1),$p=es("round"),Yp=yi(function(e,t){return e-t},0);function Xp(e){return e&&e.length?Pr(e,Se):0}function zp(e,t){return e&&e.length?Pr(e,G(t,2)):0}return l.after=mg,l.ary=ja,l.assign=r_,l.assignIn=du,l.assignInWith=Mi,l.assignWith=s_,l.at=o_,l.before=eu,l.bind=cs,l.bindAll=hp,l.bindKey=tu,l.castArray=Ig,l.chain=Za,l.chunk=Bc,l.compact=kc,l.concat=Nc,l.cond=cp,l.conforms=dp,l.constant=ys,l.countBy=Xd,l.create=a_,l.curry=nu,l.curryRight=iu,l.debounce=ru,l.defaults=u_,l.defaultsDeep=l_,l.defer=vg,l.delay=yg,l.difference=Wc,l.differenceBy=Kc,l.differenceWith=qc,l.drop=Hc,l.dropRight=Vc,l.dropRightWhile=$c,l.dropWhile=Yc,l.fill=Xc,l.filter=Zd,l.flatMap=jd,l.flatMapDeep=eg,l.flatMapDepth=tg,l.flatten=$a,l.flattenDeep=zc,l.flattenDepth=Zc,l.flip=Cg,l.flow=_p,l.flowRight=pp,l.fromPairs=Jc,l.functions=p_,l.functionsIn=m_,l.groupBy=ng,l.initial=jc,l.intersection=ed,l.intersectionBy=td,l.intersectionWith=nd,l.invert=y_,l.invertBy=C_,l.invokeMap=rg,l.iteratee=Cs,l.keyBy=sg,l.keys=fe,l.keysIn=we,l.map=Ai,l.mapKeys=w_,l.mapValues=S_,l.matches=mp,l.matchesProperty=vp,l.memoize=Fi,l.merge=T_,l.mergeWith=gu,l.method=yp,l.methodOf=Cp,l.mixin=xs,l.negate=Ii,l.nthArg=wp,l.omit=E_,l.omitBy=A_,l.once=xg,l.orderBy=og,l.over=Sp,l.overArgs=wg,l.overEvery=Tp,l.overSome=Ep,l.partial=ds,l.partialRight=su,l.partition=ag,l.pick=P_,l.pickBy=_u,l.property=wu,l.propertyOf=Ap,l.pull=od,l.pullAll=Xa,l.pullAllBy=ad,l.pullAllWith=ud,l.pullAt=ld,l.range=Pp,l.rangeRight=Fp,l.rearg=Sg,l.reject=fg,l.remove=fd,l.rest=Tg,l.reverse=fs,l.sampleSize=cg,l.set=I_,l.setWith=L_,l.shuffle=dg,l.slice=hd,l.sortBy=pg,l.sortedUniq=vd,l.sortedUniqBy=yd,l.split=j_,l.spread=Eg,l.tail=Cd,l.take=xd,l.takeRight=wd,l.takeRightWhile=Sd,l.takeWhile=Td,l.tap=kd,l.throttle=Ag,l.thru=Ei,l.toArray=fu,l.toPairs=pu,l.toPairsIn=mu,l.toPath=Dp,l.toPlainObject=cu,l.transform=R_,l.unary=Pg,l.union=Ed,l.unionBy=Ad,l.unionWith=Pd,l.uniq=Fd,l.uniqBy=Id,l.uniqWith=Ld,l.unset=M_,l.unzip=hs,l.unzipWith=za,l.update=D_,l.updateWith=G_,l.values=Qt,l.valuesIn=O_,l.without=Rd,l.words=Cu,l.wrap=Fg,l.xor=Md,l.xorBy=Dd,l.xorWith=Gd,l.zip=Od,l.zipObject=bd,l.zipObjectDeep=Ud,l.zipWith=Bd,l.entries=pu,l.entriesIn=mu,l.extend=du,l.extendWith=Mi,xs(l,l),l.add=Op,l.attempt=xu,l.camelCase=k_,l.capitalize=vu,l.ceil=bp,l.clamp=b_,l.clone=Lg,l.cloneDeep=Mg,l.cloneDeepWith=Dg,l.cloneWith=Rg,l.conformsTo=Gg,l.deburr=yu,l.defaultTo=gp,l.divide=Up,l.endsWith=N_,l.eq=He,l.escape=W_,l.escapeRegExp=K_,l.every=zd,l.find=Jd,l.findIndex=Ha,l.findKey=f_,l.findLast=Qd,l.findLastIndex=Va,l.findLastKey=h_,l.floor=Bp,l.forEach=Ja,l.forEachRight=Qa,l.forIn=c_,l.forInRight=d_,l.forOwn=g_,l.forOwnRight=__,l.get=ps,l.gt=Og,l.gte=bg,l.has=v_,l.hasIn=ms,l.head=Ya,l.identity=Se,l.includes=ig,l.indexOf=Qc,l.inRange=U_,l.invoke=x_,l.isArguments=Dt,l.isArray=B,l.isArrayBuffer=Ug,l.isArrayLike=xe,l.isArrayLikeObject=re,l.isBoolean=Bg,l.isBuffer=xt,l.isDate=kg,l.isElement=Ng,l.isEmpty=Wg,l.isEqual=Kg,l.isEqualWith=qg,l.isError=gs,l.isFinite=Hg,l.isFunction=ot,l.isInteger=ou,l.isLength=Li,l.isMap=au,l.isMatch=Vg,l.isMatchWith=$g,l.isNaN=Yg,l.isNative=Xg,l.isNil=Zg,l.isNull=zg,l.isNumber=uu,l.isObject=ne,l.isObjectLike=ie,l.isPlainObject=In,l.isRegExp=_s,l.isSafeInteger=Jg,l.isSet=lu,l.isString=Ri,l.isSymbol=Pe,l.isTypedArray=Jt,l.isUndefined=Qg,l.isWeakMap=jg,l.isWeakSet=e_,l.join=id,l.kebabCase=q_,l.last=Ue,l.lastIndexOf=rd,l.lowerCase=H_,l.lowerFirst=V_,l.lt=t_,l.lte=n_,l.max=kp,l.maxBy=Np,l.mean=Wp,l.meanBy=Kp,l.min=qp,l.minBy=Hp,l.stubArray=Ss,l.stubFalse=Ts,l.stubObject=Ip,l.stubString=Lp,l.stubTrue=Rp,l.multiply=Vp,l.nth=sd,l.noConflict=xp,l.noop=ws,l.now=Pi,l.pad=$_,l.padEnd=Y_,l.padStart=X_,l.parseInt=z_,l.random=B_,l.reduce=ug,l.reduceRight=lg,l.repeat=Z_,l.replace=J_,l.result=F_,l.round=$p,l.runInContext=p,l.sample=hg,l.size=gg,l.snakeCase=Q_,l.some=_g,l.sortedIndex=cd,l.sortedIndexBy=dd,l.sortedIndexOf=gd,l.sortedLastIndex=_d,l.sortedLastIndexBy=pd,l.sortedLastIndexOf=md,l.startCase=ep,l.startsWith=tp,l.subtract=Yp,l.sum=Xp,l.sumBy=zp,l.template=np,l.times=Mp,l.toFinite=at,l.toInteger=N,l.toLength=hu,l.toLower=ip,l.toNumber=Be,l.toSafeInteger=i_,l.toString=X,l.toUpper=rp,l.trim=sp,l.trimEnd=op,l.trimStart=ap,l.truncate=up,l.unescape=lp,l.uniqueId=Gp,l.upperCase=fp,l.upperFirst=vs,l.each=Ja,l.eachRight=Qa,l.first=Ya,xs(l,function(){var e={};return Xe(l,function(t,n){z.call(l.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),l.VERSION=o,Me(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){l[e].placeholder=l}),Me(["drop","take"],function(e,t){V.prototype[e]=function(n){n=n===r?1:le(N(n),0);var s=this.__filtered__&&!t?new V(this):this.clone();return s.__filtered__?s.__takeCount__=ge(n,s.__takeCount__):s.__views__.push({size:ge(n,Ye),type:e+(s.__dir__<0?"Right":"")}),s},V.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Me(["filter","map","takeWhile"],function(e,t){var n=t+1,s=n==Vs||n==sl;V.prototype[e]=function(a){var f=this.clone();return f.__iteratees__.push({iteratee:G(a,3),type:n}),f.__filtered__=f.__filtered__||s,f}}),Me(["head","last"],function(e,t){var n="take"+(t?"Right":"");V.prototype[e]=function(){return this[n](1).value()[0]}}),Me(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");V.prototype[e]=function(){return this.__filtered__?new V(this):this[n](1)}}),V.prototype.compact=function(){return this.filter(Se)},V.prototype.find=function(e){return this.filter(e).head()},V.prototype.findLast=function(e){return this.reverse().find(e)},V.prototype.invokeMap=q(function(e,t){return typeof e=="function"?new V(this):this.map(function(n){return Sn(n,e,t)})}),V.prototype.reject=function(e){return this.filter(Ii(G(e)))},V.prototype.slice=function(e,t){e=N(e);var n=this;return n.__filtered__&&(e>0||t<0)?new V(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=N(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},V.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},V.prototype.toArray=function(){return this.take(Ye)},Xe(V.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),s=/^(?:head|last)$/.test(t),a=l[s?"take"+(t=="last"?"Right":""):t],f=s||/^find/.test(t);a&&(l.prototype[t]=function(){var c=this.__wrapped__,g=s?[1]:arguments,v=c instanceof V,T=g[0],E=v||B(c),A=function(H){var $=a.apply(l,gt([H],g));return s&&L?$[0]:$};E&&n&&typeof T=="function"&&T.length!=1&&(v=E=!1);var L=this.__chain__,M=!!this.__actions__.length,O=f&&!L,W=v&&!M;if(!f&&E){c=W?c:new V(this);var b=e.apply(c,g);return b.__actions__.push({func:Ei,args:[A],thisArg:r}),new Ge(b,L)}return O&&W?e.apply(this,g):(b=this.thru(A),O?s?b.value()[0]:b.value():b)})}),Me(["pop","push","shift","sort","splice","unshift"],function(e){var t=Jn[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);l.prototype[e]=function(){var a=arguments;if(s&&!this.__chain__){var f=this.value();return t.apply(B(f)?f:[],a)}return this[n](function(c){return t.apply(B(c)?c:[],a)})}}),Xe(V.prototype,function(e,t){var n=l[t];if(n){var s=n.name+"";z.call($t,s)||($t[s]=[]),$t[s].push({name:t,func:n})}}),$t[vi(r,J).name]=[{name:"wrapper",func:r}],V.prototype.clone=lh,V.prototype.reverse=fh,V.prototype.value=hh,l.prototype.at=Nd,l.prototype.chain=Wd,l.prototype.commit=Kd,l.prototype.next=qd,l.prototype.plant=Vd,l.prototype.reverse=$d,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=Yd,l.prototype.first=l.prototype.head,pn&&(l.prototype[pn]=Hd),l},qt=Kf();Et?((Et.exports=qt)._=qt,Cr._=qt):ce._=qt}).call(em)}(Rn,Rn.exports)),Rn.exports}var nm=tm();class er extends Bn{constructor(i,r,o){super(),o!==void 0&&r===void 0?this.setFlatCoordinates(o,i):(r=r||0,this.setCenterAndRadius(i,r,o))}clone(){const i=new er(this.flatCoordinates.slice(),void 0,this.layout);return i.applyProperties(this),i}closestPointXY(i,r,o,u){const h=this.flatCoordinates,d=i-h[0],_=r-h[1],m=d*d+_*_;if(m<u){if(m===0)for(let x=0;x<this.stride;++x)o[x]=h[x];else{const x=this.getRadius()/Math.sqrt(m);o[0]=h[0]+x*d,o[1]=h[1]+x*_;for(let S=2;S<this.stride;++S)o[S]=h[S]}return o.length=this.stride,m}return u}containsXY(i,r){const o=this.flatCoordinates,u=i-o[0],h=r-o[1];return u*u+h*h<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(i){const r=this.flatCoordinates,o=r[this.stride]-r[0];return Zp(r[0]-o,r[1]-o,r[0]+o,r[1]+o,i)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const i=this.flatCoordinates[this.stride]-this.flatCoordinates[0],r=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return i*i+r*r}getType(){return"Circle"}intersectsExtent(i){const r=this.getExtent();if(Uu(i,r)){const o=this.getCenter();return i[0]<=o[0]&&i[2]>=o[0]||i[1]<=o[1]&&i[3]>=o[1]?!0:Jp(i,this.intersectsCoordinate.bind(this))}return!1}setCenter(i){const r=this.stride,o=this.flatCoordinates[r]-this.flatCoordinates[0],u=i.slice();u[r]=u[0]+o;for(let h=1;h<r;++h)u[r+h]=i[h];this.setFlatCoordinates(this.layout,u),this.changed()}setCenterAndRadius(i,r,o){this.setLayout(o,i,0),this.flatCoordinates||(this.flatCoordinates=[]);const u=this.flatCoordinates;let h=Qp(u,0,i,this.stride);u[h++]=u[0]+r;for(let d=1,_=this.stride;d<_;++d)u[h++]=u[d];u.length=h,this.changed()}getCoordinates(){return null}setCoordinates(i,r){}setRadius(i){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+i,this.changed()}rotate(i,r){const o=this.getCenter(),u=this.getStride();this.setCenter(jp(o,0,o.length,u,i,r,o)),this.changed()}}er.prototype.transform;class Zi extends e0{constructor(i){super(),this.geometries_=i,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(qi),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)this.changeEventsKeys_.push(wt(i[r],Dn.CHANGE,this.changed,this))}clone(){const i=new Zi(As(this.geometries_));return i.applyProperties(this),i}closestPointXY(i,r,o,u){if(u<kn(this.getExtent(),i,r))return u;const h=this.geometries_;for(let d=0,_=h.length;d<_;++d)u=h[d].closestPointXY(i,r,o,u);return u}containsXY(i,r){const o=this.geometries_;for(let u=0,h=o.length;u<h;++u)if(o[u].containsXY(i,r))return!0;return!1}computeExtent(i){t0(i);const r=this.geometries_;for(let o=0,u=r.length;o<u;++o)n0(i,r[o].getExtent());return i}getGeometries(){return As(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let i=[];const r=this.geometries_;for(let o=0,u=r.length;o<u;++o)r[o].getType()===this.getType()?i=i.concat(r[o].getGeometriesArrayRecursive()):i.push(r[o]);return i}getSimplifiedGeometry(i){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),i<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&i<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const r=[],o=this.geometries_;let u=!1;for(let h=0,d=o.length;h<d;++h){const _=o[h],m=_.getSimplifiedGeometry(i);r.push(m),m!==_&&(u=!0)}return u?new Zi(r):(this.simplifiedGeometryMaxMinSquaredTolerance=i,this)}getType(){return"GeometryCollection"}intersectsExtent(i){const r=this.geometries_;for(let o=0,u=r.length;o<u;++o)if(r[o].intersectsExtent(i))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(i,r){const o=this.geometries_;for(let u=0,h=o.length;u<h;++u)o[u].rotate(i,r);this.changed()}scale(i,r,o){o||(o=i0(this.getExtent()));const u=this.geometries_;for(let h=0,d=u.length;h<d;++h)u[h].scale(i,r,o);this.changed()}setGeometries(i){this.setGeometriesArray(As(i))}setGeometriesArray(i){this.unlistenGeometriesChange_(),this.geometries_=i,this.listenGeometriesChange_(),this.changed()}applyTransform(i){const r=this.geometries_;for(let o=0,u=r.length;o<u;++o)r[o].applyTransform(i);this.changed()}translate(i,r){const o=this.geometries_;for(let u=0,h=o.length;u<h;++u)o[u].translate(i,r);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function As(C){return C.map(i=>i.clone())}class ht extends Bn{constructor(i,r){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,r!==void 0&&!Array.isArray(i[0])?this.setFlatCoordinates(r,i):this.setCoordinates(i,r)}appendCoordinate(i){Gt(this.flatCoordinates,i),this.changed()}clone(){const i=new ht(this.flatCoordinates.slice(),this.layout);return i.applyProperties(this),i}closestPointXY(i,r,o,u){return u<kn(this.getExtent(),i,r)?u:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(r0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),s0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,i,r,o,u))}forEachSegment(i){return o0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)}getCoordinateAtM(i,r){return this.layout!="XYM"&&this.layout!="XYZM"?null:(r=r!==void 0?r:!1,Z0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,r))}getCoordinates(){return Bu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(i,r){return $u(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,r,this.stride)}getLength(){return Yu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(i){const r=[];return r.length=a0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,r,0),new ht(r,"XY")}getType(){return"LineString"}intersectsExtent(i){return u0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,this.getExtent())}setCoordinates(i,r){this.setLayout(r,i,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ku(this.flatCoordinates,0,i,this.stride),this.changed()}}class On extends Bn{constructor(i,r,o){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(i[0]))this.setCoordinates(i,r);else if(r!==void 0&&o)this.setFlatCoordinates(r,i),this.ends_=o;else{const u=i,h=[],d=[];for(let m=0,x=u.length;m<x;++m){const S=u[m];Gt(h,S.getFlatCoordinates()),d.push(h.length)}const _=u.length===0?this.getLayout():u[0].getLayout();this.setFlatCoordinates(_,h),this.ends_=d}}appendLineString(i){Gt(this.flatCoordinates,i.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const i=new On(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return i.applyProperties(this),i}closestPointXY(i,r,o,u){return u<kn(this.getExtent(),i,r)?u:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(l0(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f0(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,i,r,o,u))}getCoordinateAtM(i,r,o){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(r=r!==void 0?r:!1,o=o!==void 0?o:!1,J0(this.flatCoordinates,0,this.ends_,this.stride,i,r,o))}getCoordinates(){return h0(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(i){return i<0||this.ends_.length<=i?null:new ht(this.flatCoordinates.slice(i===0?0:this.ends_[i-1],this.ends_[i]),this.layout)}getLineStrings(){const i=this.flatCoordinates,r=this.ends_,o=this.layout,u=[];let h=0;for(let d=0,_=r.length;d<_;++d){const m=r[d],x=new ht(i.slice(h,m),o);u.push(x),h=m}return u}getLength(){const i=this.ends_;let r=0,o=0;for(let u=0,h=i.length;u<h;++u)o+=Yu(this.flatCoordinates,r,i[u],this.stride),r=i[u];return o}getFlatMidpoints(){const i=[],r=this.flatCoordinates;let o=0;const u=this.ends_,h=this.stride;for(let d=0,_=u.length;d<_;++d){const m=u[d],x=$u(r,o,m,h,.5);Gt(i,x),o=m}return i}getSimplifiedGeometryInternal(i){const r=[],o=[];return r.length=c0(this.flatCoordinates,0,this.ends_,this.stride,i,r,0,o),new On(r,"XY",o)}getType(){return"MultiLineString"}intersectsExtent(i){return d0(this.flatCoordinates,0,this.ends_,this.stride,i)}setCoordinates(i,r){this.setLayout(r,i,2),this.flatCoordinates||(this.flatCoordinates=[]);const o=g0(this.flatCoordinates,0,i,this.stride,this.ends_);this.flatCoordinates.length=o.length===0?0:o[o.length-1],this.changed()}}class tr extends Bn{constructor(i,r){super(),r&&!Array.isArray(i[0])?this.setFlatCoordinates(r,i):this.setCoordinates(i,r)}appendPoint(i){Gt(this.flatCoordinates,i.getFlatCoordinates()),this.changed()}clone(){const i=new tr(this.flatCoordinates.slice(),this.layout);return i.applyProperties(this),i}closestPointXY(i,r,o,u){if(u<kn(this.getExtent(),i,r))return u;const h=this.flatCoordinates,d=this.stride;for(let _=0,m=h.length;_<m;_+=d){const x=Ws(i,r,h[_],h[_+1]);if(x<u){u=x;for(let S=0;S<d;++S)o[S]=h[_+S];o.length=d}}return u}getCoordinates(){return Bu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(i){const r=this.flatCoordinates.length/this.stride;return i<0||r<=i?null:new Ot(this.flatCoordinates.slice(i*this.stride,(i+1)*this.stride),this.layout)}getPoints(){const i=this.flatCoordinates,r=this.layout,o=this.stride,u=[];for(let h=0,d=i.length;h<d;h+=o){const _=new Ot(i.slice(h,h+o),r);u.push(_)}return u}getType(){return"MultiPoint"}intersectsExtent(i){const r=this.flatCoordinates,o=this.stride;for(let u=0,h=r.length;u<h;u+=o){const d=r[u],_=r[u+1];if(_0(i,d,_))return!0}return!1}setCoordinates(i,r){this.setLayout(r,i,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ku(this.flatCoordinates,0,i,this.stride),this.changed()}}class bn extends Bn{constructor(i,r,o){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!o&&!Array.isArray(i[0])){const u=i,h=[],d=[];for(let _=0,m=u.length;_<m;++_){const x=u[_],S=h.length,I=x.getEnds();for(let P=0,F=I.length;P<F;++P)I[P]+=S;Gt(h,x.getFlatCoordinates()),d.push(I)}r=u.length===0?this.getLayout():u[0].getLayout(),i=h,o=d}r!==void 0&&o?(this.setFlatCoordinates(r,i),this.endss_=o):this.setCoordinates(i,r)}appendPolygon(i){let r;if(!this.flatCoordinates)this.flatCoordinates=i.getFlatCoordinates().slice(),r=i.getEnds().slice(),this.endss_.push();else{const o=this.flatCoordinates.length;Gt(this.flatCoordinates,i.getFlatCoordinates()),r=i.getEnds().slice();for(let u=0,h=r.length;u<h;++u)r[u]+=o}this.endss_.push(r),this.changed()}clone(){const i=this.endss_.length,r=new Array(i);for(let u=0;u<i;++u)r[u]=this.endss_[u].slice();const o=new bn(this.flatCoordinates.slice(),this.layout,r);return o.applyProperties(this),o}closestPointXY(i,r,o,u){return u<kn(this.getExtent(),i,r)?u:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(p0(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),m0(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,i,r,o,u))}containsXY(i,r){return v0(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,i,r)}getArea(){return y0(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(i){let r;return i!==void 0?(r=this.getOrientedFlatCoordinates().slice(),Tu(r,0,this.endss_,this.stride,i)):r=this.flatCoordinates,C0(r,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const i=Q0(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=x0(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,i),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new tr(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const i=this.flatCoordinates;w0(i,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=i:(this.orientedFlatCoordinates_=i.slice(),this.orientedFlatCoordinates_.length=Tu(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(i){const r=[],o=[];return r.length=S0(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(i),r,0,o),new bn(r,"XY",o)}getPolygon(i){if(i<0||this.endss_.length<=i)return null;let r;if(i===0)r=0;else{const h=this.endss_[i-1];r=h[h.length-1]}const o=this.endss_[i].slice(),u=o[o.length-1];if(r!==0)for(let h=0,d=o.length;h<d;++h)o[h]-=r;return new Hi(this.flatCoordinates.slice(r,u),this.layout,o)}getPolygons(){const i=this.layout,r=this.flatCoordinates,o=this.endss_,u=[];let h=0;for(let d=0,_=o.length;d<_;++d){const m=o[d].slice(),x=m[m.length-1];if(h!==0)for(let I=0,P=m.length;I<P;++I)m[I]-=h;const S=new Hi(r.slice(h,x),i,m);u.push(S),h=x}return u}getType(){return"MultiPolygon"}intersectsExtent(i){return T0(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,i)}setCoordinates(i,r){this.setLayout(r,i,3),this.flatCoordinates||(this.flatCoordinates=[]);const o=E0(this.flatCoordinates,0,i,this.stride,this.endss_);if(o.length===0)this.flatCoordinates.length=0;else{const u=o[o.length-1];this.flatCoordinates.length=u.length===0?0:u[u.length-1]}this.changed()}}const im=C=>i=>C(),rm=(C,i)=>r=>C(r)?(i(r),!0):!1,sm=C=>{C.forEach(i=>A0(i))};class om{constructor(i){this.listenedKey=i,this.eventKeys.push(wt(document,"keydown",this.handleKeyDown.bind(this))),this.eventKeys.push(wt(document,"keyup",this.handleKeyUp.bind(this)))}eventKeys=[];keyDown=!1;keyDownCallback;keyUpCallback;destroy(){sm(this.eventKeys)}isKeyDown(){return this.keyDown}setOnKeyDown(i){this.keyDownCallback=i}setOnKeyUp(i){this.keyUpCallback=i}handleKeyDown(i){i instanceof KeyboardEvent&&i.key===this.listenedKey&&(this.keyDown=!0,this.keyDownCallback&&this.keyDownCallback())}handleKeyUp(i){i instanceof KeyboardEvent&&i.key===this.listenedKey&&(this.keyDown=!1,this.keyUpCallback&&this.keyUpCallback())}}const am=(C,i)=>{C.get("draw-style-set")||(C.setStyle(i),C.set("draw-style-set",!0))},Gi={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Oi extends ji{constructor(i,r){super(i),this.feature=r}}function um(C,i){const r=[];for(let o=0;o<i.length;++o){const h=i[o].getGeometry();Zu(C,h,r)}return r}function bi(C,i){return Ws(C[0],C[1],i[0],i[1])}function en(C,i){const r=C.length;return i<0?C[i+r]:i>=r?C[i-r]:C[i]}function Ui(C,i,r){let o,u;i<r?(o=i,u=r):(o=r,u=i);const h=Math.ceil(o),d=Math.floor(u);if(h>d){const m=tn(C,o),x=tn(C,u);return bi(m,x)}let _=0;if(o<h){const m=tn(C,o),x=en(C,h);_+=bi(m,x)}if(d<u){const m=en(C,d),x=tn(C,u);_+=bi(m,x)}for(let m=h;m<d-1;++m){const x=en(C,m),S=en(C,m+1);_+=bi(x,S)}return _}function Zu(C,i,r){if(i instanceof ht){Bi(C,i.getCoordinates(),!1,r);return}if(i instanceof On){const o=i.getCoordinates();for(let u=0,h=o.length;u<h;++u)Bi(C,o[u],!1,r);return}if(i instanceof Hi){const o=i.getCoordinates();for(let u=0,h=o.length;u<h;++u)Bi(C,o[u],!0,r);return}if(i instanceof bn){const o=i.getCoordinates();for(let u=0,h=o.length;u<h;++u){const d=o[u];for(let _=0,m=d.length;_<m;++_)Bi(C,d[_],!0,r)}return}if(i instanceof Zi){const o=i.getGeometries();for(let u=0;u<o.length;++u)Zu(C,o[u],r);return}}const Ps={index:-1,endIndex:NaN};function lm(C,i,r,o){const u=C[0],h=C[1];let d=1/0,_=-1,m=NaN;for(let I=0;I<i.targets.length;++I){const P=i.targets[I],F=P.coordinates;let D=1/0,k;for(let K=0;K<F.length-1;++K){const J=F[K],ae=F[K+1],ee=Ju(u,h,J,ae);ee.squaredDistance<D&&(D=ee.squaredDistance,k=K+ee.along)}D<d&&(d=D,P.ring&&i.targetIndex===I&&(P.endIndex>P.startIndex?k<P.startIndex&&(k+=F.length):P.endIndex<P.startIndex&&k>P.startIndex&&(k-=F.length)),m=k,_=I)}const x=i.targets[_];let S=x.ring;if(i.targetIndex===_&&S){const I=tn(x.coordinates,m),P=r.getPixelFromCoordinate(I);Yi(P,i.startPx)>o&&(S=!1)}if(S){const I=x.coordinates,P=I.length,F=x.startIndex,D=m;if(F<D){const k=Ui(I,F,D);Ui(I,F,D-P)<k&&(m-=P)}else{const k=Ui(I,F,D);Ui(I,F,D+P)<k&&(m+=P)}}return Ps.index=_,Ps.endIndex=m,Ps}function Bi(C,i,r,o){const u=C[0],h=C[1];for(let d=0,_=i.length-1;d<_;++d){const m=i[d],x=i[d+1],S=Ju(u,h,m,x);if(S.squaredDistance===0){const I=d+S.along;o.push({coordinates:i,ring:r,startIndex:I,endIndex:I});return}}}const Fs={along:0,squaredDistance:0};function Ju(C,i,r,o){const u=r[0],h=r[1],d=o[0],_=o[1],m=d-u,x=_-h;let S=0,I=u,P=h;return(m!==0||x!==0)&&(S=R0(((C-u)*m+(i-h)*x)/(m*m+x*x),0,1),I+=m*S,P+=x*S),Fs.along=S,Fs.squaredDistance=L0(Ws(C,i,I,P),10),Fs}function tn(C,i){const r=C.length;let o=Math.floor(i);const u=i-o;o>=r?o-=r:o<0&&(o+=r);let h=o+1;h>=r&&(h-=r);const d=C[o],_=d[0],m=d[1],x=C[h],S=x[0]-_,I=x[1]-m;return[_+S*u,m+I*u]}class fm extends Qi{constructor(i){const r=i;r.stopDown||(r.stopDown=Nu),super(r),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=i.source?i.source:null,this.features_=i.features?i.features:null,this.snapTolerance_=i.snapTolerance?i.snapTolerance:12,this.type_=i.type,this.mode_=cm(this.type_),this.stopClick_=!!i.stopClick,this.minPoints_=i.minPoints?i.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:i.maxPoints?i.maxPoints:1/0,this.finishCondition_=i.finishCondition?i.finishCondition:Vi,this.geometryLayout_=i.geometryLayout?i.geometryLayout:"XY";let o=i.geometryFunction;if(!o){const u=this.mode_;if(u==="Circle")o=(h,d,_)=>{const m=d||new er([NaN,NaN]),x=oe(h[0]),S=bt(x,oe(h[h.length-1]));return m.setCenterAndRadius(x,Math.sqrt(S),this.geometryLayout_),m};else{let h;u==="Point"?h=Ot:u==="LineString"?h=ht:u==="Polygon"&&(h=Hi),o=(d,_,m)=>(_?u==="Polygon"?d[0].length?_.setCoordinates([d[0].concat([d[0][0]])],this.geometryLayout_):_.setCoordinates([],this.geometryLayout_):_.setCoordinates(d,this.geometryLayout_):_=new h(d,this.geometryLayout_),_)}}this.geometryFunction_=o,this.dragVertexDelay_=i.dragVertexDelay!==void 0?i.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=i.clickTolerance?i.clickTolerance*i.clickTolerance:36,this.overlay_=new Ks({source:new qs({useSpatialIndex:!1,wrapX:i.wrapX?i.wrapX:!1}),style:i.style?i.style:hm(),updateWhileInteracting:!0}),this.geometryName_=i.geometryName,this.condition_=i.condition?i.condition:P0,this.freehandCondition_,i.freehand?this.freehandCondition_=$i:this.freehandCondition_=i.freehandCondition?i.freehandCondition:F0,this.traceCondition_,this.setTrace(i.trace||!1),this.traceState_={active:!1},this.traceSource_=i.traceSource||i.source||null,this.addChangeListener(Wu.ACTIVE,this.updateState_)}setTrace(i){let r;i?i===!0?r=$i:r=i:r=Us,this.traceCondition_=r}setMap(i){super.setMap(i),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(i){i.originalEvent.type===Dn.CONTEXTMENU&&i.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(i);let r=i.type===ke.POINTERMOVE,o=!0;return!this.freehand_&&this.lastDragTime_&&i.type===ke.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=i.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&i.type===ke.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(i.coordinate),o=!1):this.freehand_&&i.type===ke.POINTERDOWN?o=!1:r&&this.getPointerCount()<2?(o=i.type===ke.POINTERMOVE,o&&this.freehand_?(this.handlePointerMove_(i),this.shouldHandle_&&i.originalEvent.preventDefault()):(i.originalEvent.pointerType==="mouse"||i.type===ke.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(i)):i.type===ke.DBLCLICK&&(o=!1),super.handleEvent(i)&&o}handleDownEvent(i){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=i.pixel,this.finishCoordinate_||this.startDrawing_(i.coordinate),!0):this.condition_(i)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new I0(ke.POINTERMOVE,i.map,i.originalEvent,!1,i.frameState))},this.dragVertexDelay_),this.downPx_=i.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(i){if(!this.traceSource_||!this.traceCondition_(i))return;if(this.traceState_.active){this.deactivateTrace_();return}const r=this.getMap(),o=r.getCoordinateFromPixel([i.pixel[0]-this.snapTolerance_,i.pixel[1]+this.snapTolerance_]),u=r.getCoordinateFromPixel([i.pixel[0]+this.snapTolerance_,i.pixel[1]-this.snapTolerance_]),h=pe([o,u]),d=this.traceSource_.getFeaturesInExtent(h);if(d.length===0)return;const _=um(i.coordinate,d);_.length&&(this.traceState_={active:!0,startPx:i.pixel.slice(),targets:_,targetIndex:-1})}addOrRemoveTracedCoordinates_(i,r){const o=i.startIndex<=i.endIndex,u=i.startIndex<=r;o===u?o&&r>i.endIndex||!o&&r<i.endIndex?this.addTracedCoordinates_(i,i.endIndex,r):(o&&r<i.endIndex||!o&&r>i.endIndex)&&this.removeTracedCoordinates_(r,i.endIndex):(this.removeTracedCoordinates_(i.startIndex,i.endIndex),this.addTracedCoordinates_(i,i.startIndex,r))}removeTracedCoordinates_(i,r){if(i===r)return;let o=0;if(i<r){const u=Math.ceil(i);let h=Math.floor(r);h===r&&(h-=1),o=h-u+1}else{const u=Math.floor(i);let h=Math.ceil(r);h===r&&(h+=1),o=u-h+1}o>0&&this.removeLastPoints_(o)}addTracedCoordinates_(i,r,o){if(r===o)return;const u=[];if(r<o){const h=Math.ceil(r);let d=Math.floor(o);d===o&&(d-=1);for(let _=h;_<=d;++_)u.push(en(i.coordinates,_))}else{const h=Math.floor(r);let d=Math.ceil(o);d===o&&(d+=1);for(let _=h;_>=d;--_)u.push(en(i.coordinates,_))}u.length&&this.appendCoordinates(u)}updateTrace_(i){const r=this.traceState_;if(!r.active||r.targetIndex===-1&&Yi(r.startPx,i.pixel)<this.snapTolerance_)return;const o=lm(i.coordinate,r,this.getMap(),this.snapTolerance_);if(r.targetIndex!==o.index){if(r.targetIndex!==-1){const m=r.targets[r.targetIndex];this.removeTracedCoordinates_(m.startIndex,m.endIndex)}const _=r.targets[o.index];this.addTracedCoordinates_(_,_.startIndex,o.endIndex)}else{const _=r.targets[r.targetIndex];this.addOrRemoveTracedCoordinates_(_,o.endIndex)}r.targetIndex=o.index;const u=r.targets[r.targetIndex];u.endIndex=o.endIndex;const h=tn(u.coordinates,u.endIndex),d=this.getMap().getPixelFromCoordinate(h);i.coordinate=h,i.pixel=[Math.round(d[0]),Math.round(d[1])]}handleUpEvent(i){let r=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(i);const o=this.traceState_.active;if(this.toggleTraceState_(i),this.shouldHandle_){const u=!this.finishCoordinate_;u&&this.startDrawing_(i.coordinate),!u&&this.freehand_?this.finishDrawing():!this.freehand_&&(!u||this.mode_==="Point")&&(this.atFinish_(i.pixel,o)?this.finishCondition_(i)&&this.finishDrawing():this.addToDrawing_(i.coordinate)),r=!1}else this.freehand_&&this.abortDrawing()}return!r&&this.stopClick_&&i.preventDefault(),r}handlePointerMove_(i){if(this.pointerType_=i.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const r=this.downPx_,o=i.pixel,u=r[0]-o[0],h=r[1]-o[1],d=u*u+h*h;if(this.shouldHandle_=this.freehand_?d>this.squaredClickTolerance_:d<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(i.coordinate.slice());return}this.updateTrace_(i),this.modifyDrawing_(i.coordinate)}atFinish_(i,r){let o=!1;if(this.sketchFeature_){let u=!1,h=[this.finishCoordinate_];const d=this.mode_;if(d==="Point")o=!0;else if(d==="Circle")o=this.sketchCoords_.length===2;else if(d==="LineString")u=!r&&this.sketchCoords_.length>this.minPoints_;else if(d==="Polygon"){const _=this.sketchCoords_;u=_[0].length>this.minPoints_,h=[_[0][0],_[0][_[0].length-2]],r?h=[_[0][0]]:h=[_[0][0],_[0][_[0].length-2]]}if(u){const _=this.getMap();for(let m=0,x=h.length;m<x;m++){const S=h[m],I=_.getPixelFromCoordinate(S),P=i[0]-I[0],F=i[1]-I[1],D=this.freehand_?1:this.snapTolerance_;if(o=Math.sqrt(P*P+F*F)<=D,o){this.finishCoordinate_=S;break}}}}return o}createOrUpdateSketchPoint_(i){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(i):(this.sketchPoint_=new ft(new Ot(i)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(i){this.sketchLine_||(this.sketchLine_=new ft);const r=i.getLinearRing(0);let o=this.sketchLine_.getGeometry();o?(o.setFlatCoordinates(r.getLayout(),r.getFlatCoordinates()),o.changed()):(o=new ht(r.getFlatCoordinates(),r.getLayout()),this.sketchLine_.setGeometry(o))}startDrawing_(i){const r=this.getMap().getView().getProjection(),o=Eu(this.geometryLayout_);for(;i.length<o;)i.push(0);this.finishCoordinate_=i,this.mode_==="Point"?this.sketchCoords_=i.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ft(new ht(this.sketchLineCoords_)));const u=this.geometryFunction_(this.sketchCoords_,void 0,r);this.sketchFeature_=new ft,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(u),this.updateSketchFeatures_(),this.dispatchEvent(new Oi(Gi.DRAWSTART,this.sketchFeature_))}modifyDrawing_(i){const r=this.getMap(),o=this.sketchFeature_.getGeometry(),u=r.getView().getProjection(),h=Eu(this.geometryLayout_);let d,_;for(;i.length<h;)i.push(0);this.mode_==="Point"?_=this.sketchCoords_:this.mode_==="Polygon"?(d=this.sketchCoords_[0],_=d[d.length-1],this.atFinish_(r.getPixelFromCoordinate(i))&&(i=this.finishCoordinate_.slice())):(d=this.sketchCoords_,_=d[d.length-1]),_[0]=i[0],_[1]=i[1],this.geometryFunction_(this.sketchCoords_,o,u),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(i),o.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(o):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(i){const r=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection();let u,h;const d=this.mode_;return d==="LineString"||d==="Circle"?(this.finishCoordinate_=i.slice(),h=this.sketchCoords_,h.length>=this.maxPoints_&&(this.freehand_?h.pop():u=!0),h.push(i.slice()),this.geometryFunction_(h,r,o)):d==="Polygon"&&(h=this.sketchCoords_[0],h.length>=this.maxPoints_&&(this.freehand_?h.pop():u=!0),h.push(i.slice()),u&&(this.finishCoordinate_=h[0]),this.geometryFunction_(this.sketchCoords_,r,o)),this.createOrUpdateSketchPoint_(i.slice()),this.updateSketchFeatures_(),u?this.finishDrawing():this.sketchFeature_}removeLastPoints_(i){if(!this.sketchFeature_)return;const r=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection(),u=this.mode_;for(let h=0;h<i;++h){let d;if(u==="LineString"||u==="Circle"){if(d=this.sketchCoords_,d.splice(-2,1),d.length>=2){this.finishCoordinate_=d[d.length-2].slice();const _=this.finishCoordinate_.slice();d[d.length-1]=_,this.createOrUpdateSketchPoint_(_)}this.geometryFunction_(d,r,o),r.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(r)}else if(u==="Polygon"){d=this.sketchCoords_[0],d.splice(-2,1);const _=this.sketchLine_.getGeometry();if(d.length>=2){const m=d[d.length-2].slice();d[d.length-1]=m,this.createOrUpdateSketchPoint_(m)}_.setCoordinates(d),this.geometryFunction_(this.sketchCoords_,r,o)}if(d.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const i=this.abortDrawing_();if(!i)return null;let r=this.sketchCoords_;const o=i.getGeometry(),u=this.getMap().getView().getProjection();return this.mode_==="LineString"?(r.pop(),this.geometryFunction_(r,o,u)):this.mode_==="Polygon"&&(r[0].pop(),this.geometryFunction_(r,o,u),r=o.getCoordinates()),this.type_==="MultiPoint"?i.setGeometry(new tr([r])):this.type_==="MultiLineString"?i.setGeometry(new On([r])):this.type_==="MultiPolygon"&&i.setGeometry(new bn([r])),this.dispatchEvent(new Oi(Gi.DRAWEND,i)),this.features_&&this.features_.push(i),this.source_&&this.source_.addFeature(i),i}abortDrawing_(){this.finishCoordinate_=null;const i=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),i}abortDrawing(){const i=this.abortDrawing_();i&&this.dispatchEvent(new Oi(Gi.DRAWABORT,i))}appendCoordinates(i){const r=this.mode_,o=!this.sketchFeature_;o&&this.startDrawing_(i[0]);let u;if(r==="LineString"||r==="Circle")u=this.sketchCoords_;else if(r==="Polygon")u=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;o&&u.shift(),u.pop();for(let d=0;d<i.length;d++)this.addToDrawing_(i[d]);const h=i[i.length-1];this.sketchFeature_=this.addToDrawing_(h),this.modifyDrawing_(h)}extend(i){const o=i.getGeometry();this.sketchFeature_=i,this.sketchCoords_=o.getCoordinates();const u=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=u.slice(),this.sketchCoords_.push(u.slice()),this.sketchPoint_=new ft(new Ot(u)),this.updateSketchFeatures_(),this.dispatchEvent(new Oi(Gi.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const i=[];this.sketchFeature_&&i.push(this.sketchFeature_),this.sketchLine_&&i.push(this.sketchLine_),this.sketchPoint_&&i.push(this.sketchPoint_);const r=this.overlay_.getSource();r.clear(!0),r.addFeatures(i)}updateState_(){const i=this.getMap(),r=this.getActive();(!i||!r)&&this.abortDrawing(),this.overlay_.setMap(r?i:null)}}function hm(){const C=Ku();return function(i,r){return C[i.getGeometry().getType()]}}function cm(C){switch(C){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+C)}}class nr{interactionGroup;interactionUid;constructor(i,r){this.interactionGroup=i,this.interactionUid=r}destroy(){this.interactionGroup.remove(this.interactionUid)}}class ki extends nr{constructor(i,r,o){super(i,r),this.createInteraction(o)}createInteraction(i){let r=this.interactionGroup.find(this.interactionUid);r||(r=new fm(i),this.interactionGroup.add(this.interactionUid,r))}getInteraction(){return this.interactionGroup.find(this.interactionUid)}static getDefaultPolygonOptions(i){return{freehandCondition:Us,source:i,type:"Polygon"}}static getDefaultCircleOptions(i){return{source:i,type:"Circle"}}static getDefaultLineOptions(i){return{freehandCondition:Us,source:i,type:"LineString"}}static getDefaultPointOptions(i){return{source:i,type:"Point"}}}const Iu=0,Mn=1,Lu=[0,0,0,0],rn=[],Is={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class Ls extends ji{constructor(i,r,o){super(i),this.features=r,this.mapBrowserEvent=o}}let dm=class extends Qi{constructor(i){super(i),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=i.condition?i.condition:M0,this.defaultDeleteCondition_=function(o){return D0(o)&&G0(o)},this.deleteCondition_=i.deleteCondition?i.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=i.insertVertexCondition?i.insertVertexCondition:$i,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Xu,this.pixelTolerance_=i.pixelTolerance!==void 0?i.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Ks({source:new qs({useSpatialIndex:!1,wrapX:!!i.wrapX}),style:i.style?i.style:_m(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let r;if(i.features?r=i.features:i.source&&(this.source_=i.source,r=new nn(this.source_.getFeatures()),this.source_.addEventListener(zi.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(zi.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!r)throw new Error("The modify interaction requires features, a source or a layer");i.hitDetection&&(this.hitDetection_=i.hitDetection),this.features_=r,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Xi.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Xi.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=i.snapToPointer===void 0?!this.hitDetection_:i.snapToPointer}addFeature_(i){const r=i.getGeometry();if(r){const u=this.SEGMENT_WRITERS_[r.getType()];u&&u(i,r)}const o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(o.getCoordinateFromPixel(this.lastPixel_)),i.addEventListener(Dn.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(i,r){if(!this.featuresBeingModified_){this.featuresBeingModified_=new nn;const o=this.featuresBeingModified_.getArray();for(let u=0,h=r.length;u<h;++u){const d=r[u].feature;d&&!o.includes(d)&&this.featuresBeingModified_.push(d)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new Ls(Is.MODIFYSTART,this.featuresBeingModified_,i))}}removeFeature_(i){this.removeFeatureSegmentData_(i),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),i.removeEventListener(Dn.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(i){const r=this.rBush_,o=[];r.forEach(function(u){i===u.feature&&o.push(u)});for(let u=o.length-1;u>=0;--u){const h=o[u];for(let d=this.dragSegments_.length-1;d>=0;--d)this.dragSegments_[d][0]===h&&this.dragSegments_.splice(d,1);r.remove(h)}}setActive(i){this.vertexFeature_&&!i&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(i)}setMap(i){this.overlay_.setMap(i),super.setMap(i)}getOverlay(){return this.overlay_}handleSourceAdd_(i){i.feature&&this.features_.push(i.feature)}handleSourceRemove_(i){i.feature&&this.features_.remove(i.feature)}handleFeatureAdd_(i){this.addFeature_(i.element)}handleFeatureChange_(i){if(!this.changingFeature_){const r=i.target;this.removeFeature_(r),this.addFeature_(r)}}handleFeatureRemove_(i){this.removeFeature_(i.element)}writePointGeometry_(i,r){const o=r.getCoordinates(),u={feature:i,geometry:r,segment:[o,o]};this.rBush_.insert(r.getExtent(),u)}writeMultiPointGeometry_(i,r){const o=r.getCoordinates();for(let u=0,h=o.length;u<h;++u){const d=o[u],_={feature:i,geometry:r,depth:[u],index:u,segment:[d,d]};this.rBush_.insert(r.getExtent(),_)}}writeLineStringGeometry_(i,r){const o=r.getCoordinates();for(let u=0,h=o.length-1;u<h;++u){const d=o.slice(u,u+2),_={feature:i,geometry:r,index:u,segment:d};this.rBush_.insert(pe(d),_)}}writeMultiLineStringGeometry_(i,r){const o=r.getCoordinates();for(let u=0,h=o.length;u<h;++u){const d=o[u];for(let _=0,m=d.length-1;_<m;++_){const x=d.slice(_,_+2),S={feature:i,geometry:r,depth:[u],index:_,segment:x};this.rBush_.insert(pe(x),S)}}}writePolygonGeometry_(i,r){const o=r.getCoordinates();for(let u=0,h=o.length;u<h;++u){const d=o[u];for(let _=0,m=d.length-1;_<m;++_){const x=d.slice(_,_+2),S={feature:i,geometry:r,depth:[u],index:_,segment:x};this.rBush_.insert(pe(x),S)}}}writeMultiPolygonGeometry_(i,r){const o=r.getCoordinates();for(let u=0,h=o.length;u<h;++u){const d=o[u];for(let _=0,m=d.length;_<m;++_){const x=d[_];for(let S=0,I=x.length-1;S<I;++S){const P=x.slice(S,S+2),F={feature:i,geometry:r,depth:[_,u],index:S,segment:P};this.rBush_.insert(pe(P),F)}}}}writeCircleGeometry_(i,r){const o=r.getCenter(),u={feature:i,geometry:r,index:Iu,segment:[o,o]},h={feature:i,geometry:r,index:Mn,segment:[o,o]},d=[u,h];u.featureSegments=d,h.featureSegments=d,this.rBush_.insert(Es(o),u);let _=r;this.rBush_.insert(_.getExtent(),h)}writeGeometryCollectionGeometry_(i,r){const o=r.getGeometriesArray();for(let u=0;u<o.length;++u){const h=o[u],d=this.SEGMENT_WRITERS_[h.getType()];d(i,h)}}createOrUpdateVertexFeature_(i,r,o,u){let h=this.vertexFeature_;return h?h.getGeometry().setCoordinates(i):(h=new ft(new Ot(i)),this.vertexFeature_=h,this.overlay_.getSource().addFeature(h)),h.set("features",r),h.set("geometries",o),h.set("existing",u),h}handleEvent(i){if(!i.originalEvent)return!0;this.lastPointerEvent_=i;let r;return!i.map.getView().getInteracting()&&i.type==ke.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(i),this.vertexFeature_&&this.deleteCondition_(i)&&(i.type!=ke.SINGLECLICK||!this.ignoreNextSingleClick_?r=this.removePoint():r=!0),i.type==ke.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(i)&&!r}findInsertVerticesAndUpdateDragSegments_(i){this.handlePointerAtPixel_(i),this.dragSegments_.length=0,this.featuresBeingModified_=null;const r=this.vertexFeature_;if(!r)return;this.getMap().getView().getProjection();const o=[],u=r.getGeometry().getCoordinates(),h=pe([u]),d=this.rBush_.getInExtent(h),_={};d.sort(gm);for(let m=0,x=d.length;m<x;++m){const S=d[m],I=S.segment;let P=Je(S.geometry);const F=S.depth;if(F&&(P+="-"+F.join("-")),_[P]||(_[P]=new Array(2)),S.geometry.getType()==="Circle"&&S.index===Mn){const D=Mu(i,S);$e(D,u)&&!_[P][0]&&(this.dragSegments_.push([S,0]),_[P][0]=S);continue}if($e(I[0],u)&&!_[P][0]){this.dragSegments_.push([S,0]),_[P][0]=S;continue}if($e(I[1],u)&&!_[P][1]){if(_[P][0]&&_[P][0].index===0){let D=S.geometry.getCoordinates();switch(S.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":D=D[F[1]];case"Polygon":if(S.index!==D[F[0]].length-2)continue;break}}this.dragSegments_.push([S,1]),_[P][1]=S;continue}Je(I)in this.vertexSegments_&&!_[P][0]&&!_[P][1]&&o.push(S)}return o}handleDragEvent(i){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(i,this.dragSegments_.map(([h])=>h));const r=[i.coordinate[0]+this.delta_[0],i.coordinate[1]+this.delta_[1]],o=[],u=[];for(let h=0,d=this.dragSegments_.length;h<d;++h){const _=this.dragSegments_[h],m=_[0],x=m.feature;o.includes(x)||o.push(x);const S=m.geometry;u.includes(S)||u.push(S);const I=m.depth;let P;const F=m.segment,D=_[1];for(;r.length<S.getStride();)r.push(F[D][r.length]);switch(S.getType()){case"Point":P=r,F[0]=r,F[1]=r;break;case"MultiPoint":P=S.getCoordinates(),P[m.index]=r,F[0]=r,F[1]=r;break;case"LineString":P=S.getCoordinates(),P[m.index+D]=r,F[D]=r;break;case"MultiLineString":P=S.getCoordinates(),P[I[0]][m.index+D]=r,F[D]=r;break;case"Polygon":P=S.getCoordinates(),P[I[0]][m.index+D]=r,F[D]=r;break;case"MultiPolygon":P=S.getCoordinates(),P[I[1]][I[0]][m.index+D]=r,F[D]=r;break;case"Circle":const k=S;if(F[0]=r,F[1]=r,m.index===Iu)this.changingFeature_=!0,k.setCenter(r),this.changingFeature_=!1;else{this.changingFeature_=!0,i.map.getView().getProjection();let K=Yi(oe(k.getCenter()),oe(r));k.setRadius(K),this.changingFeature_=!1}break}P&&this.setGeometryCoordinates_(S,P)}this.createOrUpdateVertexFeature_(r,o,u,!0)}handleDownEvent(i){if(!this.condition_(i))return!1;const r=i.coordinate,o=this.findInsertVerticesAndUpdateDragSegments_(r);if(o?.length&&this.insertVertexCondition_(i)&&(this.willModifyFeatures_(i,o),this.vertexFeature_)){const u=this.vertexFeature_.getGeometry().getCoordinates();for(let h=o.length-1;h>=0;--h)this.insertVertex_(o[h],u);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(i){for(let r=this.dragSegments_.length-1;r>=0;--r){const o=this.dragSegments_[r][0],u=o.geometry;if(u.getType()==="Circle"){const h=u,d=h.getCenter(),_=o.featureSegments[0],m=o.featureSegments[1];_.segment[0]=d,_.segment[1]=d,m.segment[0]=d,m.segment[1]=d,this.rBush_.update(Es(d),_);let x=h;this.rBush_.update(x.getExtent(),m)}else this.rBush_.update(pe(o.segment),o)}return this.featuresBeingModified_&&(this.dispatchEvent(new Ls(Is.MODIFYEND,this.featuresBeingModified_,i)),this.featuresBeingModified_=null),!1}handlePointerMove_(i){this.lastPixel_=i.pixel,this.handlePointerAtPixel_(i.coordinate)}handlePointerAtPixel_(i){const r=this.getMap(),o=r.getPixelFromCoordinate(i);r.getView().getProjection();const u=function(_,m){return Ru(i,_)-Ru(i,m)};let h,d;if(this.hitDetection_){const _=typeof this.hitDetection_=="object"?m=>m===this.hitDetection_:void 0;r.forEachFeatureAtPixel(o,(m,x,S)=>{S&&S.getType()==="Point"&&(S=new Ot(Gn(S.getCoordinates())));const I=S||m.getGeometry();if(I&&I.getType()==="Point"&&m instanceof ft&&this.features_.getArray().includes(m)){d=I;const P=m.getGeometry().getFlatCoordinates().slice(0,2);h=[{feature:m,geometry:d,segment:[P,P]}]}return!0},{layerFilter:_})}if(!h){const _=O0(Es(i,Lu)),m=r.getView().getResolution()*this.pixelTolerance_,x=qu(Hu(_,m,Lu));h=this.rBush_.getInExtent(x)}if(h&&h.length>0){const _=h.sort(u)[0],m=_.segment;let x=Mu(i,_);const S=r.getPixelFromCoordinate(x);let I=Yi(o,S);if(d||I<=this.pixelTolerance_){const P={};if(P[Je(m)]=!0,this.snapToPointer_||(this.delta_[0]=x[0]-i[0],this.delta_[1]=x[1]-i[1]),_.geometry.getType()==="Circle"&&_.index===Mn)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(x,[_.feature],[_.geometry],this.snappedToVertex_);else{const F=r.getPixelFromCoordinate(m[0]),D=r.getPixelFromCoordinate(m[1]),k=bt(S,F),K=bt(S,D);if(I=Math.sqrt(Math.min(k,K)),this.snappedToVertex_=I<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(x=k>K?m[1]:m[0]),this.createOrUpdateVertexFeature_(x,[_.feature],[_.geometry],this.snappedToVertex_);const J={};J[Je(_.geometry)]=!0;for(let ae=1,ee=h.length;ae<ee;++ae){const he=h[ae].segment;if($e(m[0],he[0])&&$e(m[1],he[1])||$e(m[0],he[1])&&$e(m[1],he[0])){const Le=Je(h[ae].geometry);Le in J||(J[Le]=!0,P[Je(he)]=!0)}else break}}this.vertexSegments_=P;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(i,r){const o=i.segment,u=i.feature,h=i.geometry,d=i.depth,_=i.index;let m;for(;r.length<h.getStride();)r.push(0);switch(h.getType()){case"MultiLineString":m=h.getCoordinates(),m[d[0]].splice(_+1,0,r);break;case"Polygon":m=h.getCoordinates(),m[d[0]].splice(_+1,0,r);break;case"MultiPolygon":m=h.getCoordinates(),m[d[1]][d[0]].splice(_+1,0,r);break;case"LineString":m=h.getCoordinates(),m.splice(_+1,0,r);break;default:return!1}this.setGeometryCoordinates_(h,m);const x=this.rBush_;x.remove(i),this.updateSegmentIndices_(h,_,d,1);const S={segment:[o[0],r],feature:u,geometry:h,depth:d,index:_};x.insert(pe(S.segment),S),this.dragSegments_.push([S,1]);const I={segment:[r,o[1]],feature:u,geometry:h,depth:d,index:_+1};return x.insert(pe(I.segment),I),this.dragSegments_.push([I,0]),!0}updatePointer_(i){return i&&this.findInsertVerticesAndUpdateDragSegments_(i),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const i=this.vertexFeature_?.getGeometry().getCoordinates();return i?Gn(i,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(o=>o.getType()==="Circle"||o.getType().endsWith("Point")))return!1;const i=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(pe([i])).some(({segment:o})=>$e(o[0],i)||$e(o[1],i))}removePoint(i){if(i&&(i=oe(i,this.getMap().getView().getProjection()),this.updatePointer_(i)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=ke.POINTERDRAG){const r=this.lastPointerEvent_;this.willModifyFeatures_(r,this.dragSegments_.map(([u])=>u));const o=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Ls(Is.MODIFYEND,this.featuresBeingModified_,r)),this.featuresBeingModified_=null,o}return!1}removeVertex_(){const i=this.dragSegments_,r={};let o=!1,u,h,d,_,m,x,S,I,P,F,D;for(m=i.length-1;m>=0;--m)d=i[m],F=d[0],D=Je(F.feature),F.depth&&(D+="-"+F.depth.join("-")),D in r||(r[D]={}),d[1]===0?(r[D].right=F,r[D].index=F.index):d[1]==1&&(r[D].left=F,r[D].index=F.index+1);for(D in r){switch(P=r[D].right,S=r[D].left,x=r[D].index,I=x-1,S!==void 0?F=S:F=P,I<0&&(I=0),_=F.geometry,h=_.getCoordinates(),u=h,o=!1,_.getType()){case"MultiLineString":h[F.depth[0]].length>2&&(h[F.depth[0]].splice(x,1),o=!0);break;case"LineString":h.length>2&&(h.splice(x,1),o=!0);break;case"MultiPolygon":u=u[F.depth[1]];case"Polygon":u=u[F.depth[0]],u.length>4&&(x==u.length-1&&(x=0),u.splice(x,1),o=!0,x===0&&(u.pop(),u.push(u[0]),I=u.length-1));break}if(o){this.setGeometryCoordinates_(_,h);const k=[];if(S!==void 0&&(this.rBush_.remove(S),k.push(S.segment[0])),P!==void 0&&(this.rBush_.remove(P),k.push(P.segment[1])),S!==void 0&&P!==void 0){const K={depth:F.depth,feature:F.feature,geometry:F.geometry,index:I,segment:k};this.rBush_.insert(pe(K.segment),K)}this.updateSegmentIndices_(_,x,F.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),i.length=0}}return o}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(o=>o.getType()==="Circle"||o.getType().endsWith("Point")))return!1;const i=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(pe([i])).some(({segment:o})=>!($e(o[0],i)||$e(o[1],i)))}insertPoint(i){const r=i?oe(i,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return r?this.findInsertVerticesAndUpdateDragSegments_(r).reduce((u,h)=>u||this.insertVertex_(h,r),!1):!1}setGeometryCoordinates_(i,r){this.changingFeature_=!0,i.setCoordinates(r),this.changingFeature_=!1}updateSegmentIndices_(i,r,o,u){this.rBush_.forEachInExtent(i.getExtent(),function(h){h.geometry===i&&(o===void 0||h.depth===void 0||b0(h.depth,o))&&h.index>r&&(h.index+=u)})}};function gm(C,i){return C.index-i.index}function Ru(C,i,r){const o=i.geometry;if(o.getType()==="Circle"){let h=o;if(i.index===Mn){const d=bt(h.getCenter(),oe(C)),_=Math.sqrt(d)-h.getRadius();return _*_}}const u=oe(C);return rn[0]=oe(i.segment[0]),rn[1]=oe(i.segment[1]),U0(u,rn)}function Mu(C,i,r){const o=i.geometry;if(o.getType()==="Circle"&&i.index===Mn)return Gn(o.getClosestPoint(oe(C)));const u=oe(C);return rn[0]=oe(i.segment[0]),rn[1]=oe(i.segment[1]),Gn(Vu(u,rn))}function _m(){const C=Ku();return function(i,r){return C.Point}}class pm extends nr{constructor(i,r,o){super(i,r),this.createInteraction(o)}getInteraction(){return this.interactionGroup.find(this.interactionUid)}createInteraction(i){let r=this.interactionGroup.find(this.interactionUid);r||(r=new dm(i),this.interactionGroup.add(this.interactionUid,r))}}const Rs={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class Ms extends ji{constructor(i,r,o,u,h){super(i),this.features=r,this.coordinate=o,this.startCoordinate=u,this.mapBrowserEvent=h}}let mm=class extends Qi{constructor(i){i=i||{},super(i),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=i.features!==void 0?i.features:null;let r;if(i.layers&&!this.features_)if(typeof i.layers=="function")r=i.layers;else{const o=i.layers;r=function(u){return o.includes(u)}}else r=Vi;this.layerFilter_=r,this.filter_=i.filter&&!this.features_?i.filter:Vi,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0,this.condition_=i.condition?i.condition:$i,this.lastFeature_=null,this.addChangeListener(Wu.ACTIVE,this.handleActiveChanged_)}handleDownEvent(i){if(!i.originalEvent||!this.condition_(i))return!1;if(this.lastFeature_=this.featuresAtPixel_(i.pixel,i.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=i.coordinate,this.lastCoordinate_=i.coordinate,this.handleMoveEvent(i);const r=this.features_||new nn([this.lastFeature_]);return this.dispatchEvent(new Ms(Rs.TRANSLATESTART,r,i.coordinate,this.startCoordinate_,i)),!0}return!1}handleUpEvent(i){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(i);const r=this.features_||new nn([this.lastFeature_]);return this.dispatchEvent(new Ms(Rs.TRANSLATEEND,r,i.coordinate,this.startCoordinate_,i)),this.startCoordinate_=null,!0}return!1}handleDragEvent(i){if(this.lastCoordinate_){const r=i.coordinate;i.map.getView().getProjection();const o=oe(r),u=oe(this.lastCoordinate_),h=o[0]-u[0],d=o[1]-u[1],_=this.features_||new nn([this.lastFeature_]);_.forEach(function(m){const x=m.getGeometry();x.translate(h,d),m.setGeometry(x)}),this.lastCoordinate_=r,this.dispatchEvent(new Ms(Rs.TRANSLATING,_,r,this.startCoordinate_,i))}}handleMoveEvent(i){const r=i.map.getViewport();this.featuresAtPixel_(i.pixel,i.map)?(r.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),r.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):r.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(i,r){return r.forEachFeatureAtPixel(i,(o,u)=>{if(!(!(o instanceof ft)||!this.filter_(o,u))&&!(this.features_&&!this.features_.getArray().includes(o)))return o},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(i){this.hitTolerance_=i}setMap(i){const r=this.getMap();super.setMap(i),this.updateState_(r)}handleActiveChanged_(){this.updateState_(null)}updateState_(i){let r=this.getMap();const o=this.getActive();(!r||!o)&&(r=r||i,r&&r.getViewport().classList.remove("ol-grab","ol-grabbing"))}};class vm extends nr{constructor(i,r,o){super(i,r),this.createInteraction(o)}getInteraction(){return this.interactionGroup.find(this.interactionUid)}createInteraction(i){let r=this.interactionGroup.find(this.interactionUid);r||(r=new mm(i),this.interactionGroup.add(this.interactionUid,r))}}const Ds={SNAP:"snap",UNSNAP:"unsnap"};class Gs extends ji{constructor(i,r){super(i),this.vertex=r.vertex,this.vertexPixel=r.vertexPixel,this.feature=r.feature,this.segment=r.segment}}const ks={Circle(C,i){const o=N0(C);return ks.Polygon(o)},GeometryCollection(C,i){const r=[],o=C.getGeometriesArray();for(let u=0;u<o.length;++u){const h=ks[o[u].getType()];h&&r.push(h(o[u],i))}return r.flat()},LineString(C){const i=[],r=C.getFlatCoordinates(),o=C.getStride();for(let u=0,h=r.length-o;u<h;u+=o)i.push([r.slice(u,u+2),r.slice(u+o,u+o+2)]);return i},MultiLineString(C){const i=[],r=C.getFlatCoordinates(),o=C.getStride(),u=C.getEnds();let h=0;for(let d=0,_=u.length;d<_;++d){const m=u[d];for(let x=h,S=m-o;x<S;x+=o)i.push([r.slice(x,x+2),r.slice(x+o,x+o+2)]);h=m}return i},MultiPoint(C){const i=[],r=C.getFlatCoordinates(),o=C.getStride();for(let u=0,h=r.length;u<h;u+=o)i.push([r.slice(u,u+2)]);return i},MultiPolygon(C){const i=[],r=C.getFlatCoordinates(),o=C.getStride(),u=C.getEndss();let h=0;for(let d=0,_=u.length;d<_;++d){const m=u[d];for(let x=0,S=m.length;x<S;++x){const I=m[x];for(let P=h,F=I-o;P<F;P+=o)i.push([r.slice(P,P+2),r.slice(P+o,P+o+2)]);h=I}}return i},Point(C){return[[C.getFlatCoordinates().slice(0,2)]]},Polygon(C){const i=[],r=C.getFlatCoordinates(),o=C.getStride(),u=C.getEnds();let h=0;for(let d=0,_=u.length;d<_;++d){const m=u[d];for(let x=h,S=m-o;x<S;x+=o)i.push([r.slice(x,x+2),r.slice(x+o,x+o+2)]);h=m}return i}};function Du(C){return C.feature?C.feature:C.element?C.element:null}const Os=[],lt=[],jt=[];let ym=class extends Qi{constructor(i){i=i||{};const r=i;r.handleDownEvent||(r.handleDownEvent=Vi),r.stopDown||(r.stopDown=Nu),super(r),this.on,this.once,this.un,this.source_=i.source?i.source:null,this.vertex_=i.vertex!==void 0?i.vertex:!0,this.edge_=i.edge!==void 0?i.edge:!0,this.intersection_=i.intersection!==void 0?i.intersection:!1,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=i.pixelTolerance!==void 0?i.pixelTolerance:10,this.rBush_=new Xu,this.snapped_=null,this.segmenters_=Object.assign({},ks,i.segmenters)}addFeature(i,r){r=r!==void 0?r:!0;const o=Je(i),u=i.getGeometry();if(u){const h=this.segmenters_[u.getType()];if(h){this.indexedFeaturesExtents_[o]=u.getExtent(B0());const d=h(u,this.getMap().getView().getProjection());let _=d.length;for(let m=0;m<_;++m){const x=d[m];lt[m]=pe(x),jt[m]={feature:i,segment:x}}if(lt.length=_,jt.length=_,this.intersection_)for(let m=0,x=d.length;m<x;++m){const S=d[m];if(S.length===1)continue;const I=lt[m];for(let F=0,D=d.length;F<D;++F){if(m===F||m-1===F||m+1===F)continue;const k=d[F];if(!Uu(I,lt[F]))continue;const K=Au(S,k);if(!K)continue;const J=[K];lt[_]=pe(J),jt[_++]={feature:i,segment:J,isIntersection:!0}}const P=this.rBush_.getInExtent(lt[m]);for(const{segment:F}of P){if(F.length===1)continue;const D=Au(S,F);if(!D)continue;const k=[D];lt[_]=pe(k),jt[_++]={feature:i,segment:k,isIntersection:!0}}}_===1?this.rBush_.insert(lt[0],jt[0]):this.rBush_.load(lt,jt)}}r&&(this.featureChangeListenerKeys_[o]=wt(i,Dn.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let i;return this.features_?i=this.features_:this.source_&&(i=this.source_.getFeatures()),i}areSnapDataEqual_(i,r){return i.segment===r.segment&&i.feature===r.feature}handleEvent(i){const r=this.snapTo(i.pixel,i.coordinate,i.map);return r?(i.coordinate=r.vertex.slice(0,2),i.pixel=r.vertexPixel,this.snapped_&&!this.areSnapDataEqual_(this.snapped_,r)&&this.dispatchEvent(new Gs(Ds.UNSNAP,this.snapped_)),this.snapped_={vertex:i.coordinate,vertexPixel:i.pixel,feature:r.feature,segment:r.segment},this.dispatchEvent(new Gs(Ds.SNAP,this.snapped_))):this.snapped_&&(this.dispatchEvent(new Gs(Ds.UNSNAP,this.snapped_)),this.snapped_=null),super.handleEvent(i)}handleFeatureAdd_(i){const r=Du(i);r&&this.addFeature(r)}handleFeatureRemove_(i){const r=Du(i);r&&this.removeFeature(r)}handleFeatureChange_(i){const r=i.target;if(this.handlingDownUpSequence){const o=Je(r);o in this.pendingFeatures_||(this.pendingFeatures_[o]=r)}else this.updateFeature_(r)}handleUpEvent(i){const r=Object.values(this.pendingFeatures_);if(r.length)for(const o of r)this.updateFeature_(o);return!1}removeFeature(i,r){const o=r!==void 0?r:!0,u=Je(i),h=this.indexedFeaturesExtents_[u];if(h){const d=this.rBush_,_=[];d.forEachInExtent(h,function(m){i===m.feature&&_.push(m)});for(let m=_.length-1;m>=0;--m)d.remove(_[m])}o&&(qi(this.featureChangeListenerKeys_[u]),delete this.featureChangeListenerKeys_[u])}setMap(i){const r=this.getMap(),o=this.featuresListenerKeys_;let u=this.getFeatures_();if(Array.isArray(u)||(u=u.getArray()),r&&(o.forEach(qi),o.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(qi),this.featureChangeListenerKeys_={}),super.setMap(i),i){this.features_?o.push(wt(this.features_,Xi.ADD,this.handleFeatureAdd_,this),wt(this.features_,Xi.REMOVE,this.handleFeatureRemove_,this)):this.source_&&o.push(wt(this.source_,zi.ADDFEATURE,this.handleFeatureAdd_,this),wt(this.source_,zi.REMOVEFEATURE,this.handleFeatureRemove_,this));for(const h of u)this.addFeature(h)}}snapTo(i,r,o){o.getView().getProjection();const u=oe(r),h=qu(Hu(pe([u]),o.getView().getResolution()*this.pixelTolerance_)),d=this.rBush_.getInExtent(h),_=d.length;if(_===0)return null;let m,x=1/0,S,I=null,P;const F=this.pixelTolerance_*this.pixelTolerance_,D=()=>{if(m){const k=o.getPixelFromCoordinate(m);if(bt(i,k)<=F&&(P&&this.intersection_||!P&&(this.vertex_||this.edge_)))return{vertex:m,vertexPixel:[Math.round(k[0]),Math.round(k[1])],feature:S,segment:I}}return null};if(this.vertex_||this.intersection_){for(let K=0;K<_;++K){const J=d[K];if(J.feature.getGeometry().getType()!=="Circle")for(const ae of J.segment){const ee=oe(ae),he=bt(u,ee);he<x&&(m=ae,x=he,S=J.feature,P=J.isIntersection)}}const k=D();if(k)return k}if(this.edge_){for(let K=0;K<_;++K){let J=null;const ae=d[K];if(ae.feature.getGeometry().getType()==="Circle"){let ee=ae.feature.getGeometry();J=k0(u,ee)}else{const[ee,he]=ae.segment;he&&(Os[0]=oe(ee),Os[1]=oe(he),J=Vu(u,Os))}if(J){const ee=bt(u,J);ee<x&&(m=Gn(J),I=ae.feature.getGeometry().getType()==="Circle"?null:ae.segment,x=ee,S=ae.feature)}}const k=D();if(k)return k}return null}updateFeature_(i){this.removeFeature(i,!1),this.addFeature(i,!1)}};class Cm extends nr{constructor(i,r,o){super(i,r),this.createInteraction(o)}getInteraction(){return this.interactionGroup.find(this.interactionUid)}createInteraction(i){let r=this.interactionGroup.find(this.interactionUid);r||(r=new ym(i),this.interactionGroup.add(this.interactionUid,r))}}const xm=new Bs,Ln="interactionUid",Ni="interactionGroupUId",wm="olcInteractionGroup";class Qu{map;groupUid;constructor(i,r){this.map=i,this.groupUid=r??wm}getGroupInteractions(){return this.map.getInteractions().getArray().filter(i=>i.get(Ni)===this.groupUid)}add(i,r){if(this.hasInteraction(i)){console.warn(`Interaction with uid "${i}" already exists in group "${this.groupUid}"`);return}const o=r.get(Ni);if(o){console.warn(`Interaction with uid "${i}" already exists in group "${o}"`);return}r.set(Ln,i),r.set(Ni,this.groupUid),this.map.addInteraction(r)}find(i){return this.getGroupInteractions().find(r=>r.get(Ln)===i)}findByIncluding(i){return this.getGroupInteractions().filter(r=>`${r.get(Ln)}`.includes(i))}remove(i){const r=this.find(i);r&&(r.unset(Ni),this.map.removeInteraction(r))}hasInteraction(i){return!!this.getGroupInteractions().find(r=>r.get(Ln)===i)}setActive(i,r){const o=this.find(r);o&&(i?this.use(o):o.setActive(!1))}deactivateAll(){return this.getGroupInteractions().forEach(i=>i.setActive(!1))}destroy(){this.deactivateAll(),this.getGroupInteractions().forEach(i=>{this.remove(i.get(Ln))})}use(i){this.deactivateAll(),i.setActive(!0)}}const St=W0.createEmptyMap(),Ji="layer1-id",Sm="background1-id",Hs="point-interaction-uid",ju="line-interaction-uid",Tm=new Ks({source:new qs({features:new nn([new ft])})}),Em=new K0({source:new q0}),Gu=C=>{document.querySelector("#console .text").textContent=C};St.setView(new H0({center:[0,0],zoom:2}));St.setTarget("map");let sn=new zu(St);sn.addLayer(Tm,Ji);const Am=new V0(St);Am.addLayer(Em,Sm);const bs=new Qu(St,"modify"),Un=new Qu(St,"draw");let Ou,bu,Ns,Wi;const Pm=[],Fm=()=>{sn=new zu(St);const C=sn?.getLayer(Ji),i=C?.getSource();if(!C||!i||!St){console.error("No layer source or no map to draw in.");return}am(C,Ki),Wi=new om("Delete");const r=ki.getDefaultPointOptions(i);r.style=Ki,r.condition=()=>!Wi?.isKeyDown(),Ou=new ki(Un,Hs,r);const o=ki.getDefaultLineOptions(i);o.style=Ki,o.condition=()=>!Wi?.isKeyDown(),bu=new ki(Un,ju,o),Ns=new pm(bs,"modify",{deleteCondition:rm(nm.overEvery($0,im(()=>Wi.isKeyDown())),Im.bind(void 0)),source:i,style:Ki}),new vm(bs,"translate",{layers:[C],condition:Y0}),new Cm(bs,"snap",{source:i}),Pm.push(Ou.getInteraction()?.on("drawend",()=>{Gu("Point added.")}),bu.getInteraction()?.on("drawend",()=>{Gu("Line added.")}))},Ki=C=>{const i=C?.getGeometry(),r=i?.getType();if(["MultiPoint","Point"].includes(`${r}`)&&i){const o=i.getCoordinates()[0]??0,u=Math.round(Math.abs(o)/(20037508/2)*255);return new Bs({image:new X0({radius:8,fill:new z0({color:`rgba(${u}, 0, 0, 0.7)`}),stroke:new Pu({color:`rgba(${u}, 0, 0, 0.7)`})})})}else return["LineString","MultiLineString"].includes(`${r}`)&&i?new Bs({stroke:new Pu({color:"rgba(200, 150, 0, 0.8)",width:4})}):xm},Im=C=>{setTimeout(()=>Lm(C),20)},Lm=C=>{C.map.forEachFeatureAtPixel(C.pixel,i=>{if(!sn||i instanceof j0)return;const r=i.getGeometry();if(!r||r.getType()==="LineString"&&r.getCoordinates().length>2)return;(sn.getFeaturesCollection(Ji)?.getArray()||[]).includes(i)&&(sn.removeFeatures(Ji,[i]),Ns?.getInteraction()?.setActive(!1),Ns?.getInteraction()?.setActive(!0))})};Fm();Un.setActive(!0,Hs);const Rm=document.getElementById("type");Rm.addEventListener("change",C=>{C.target.value==="point"?Un.setActive(!0,Hs):Un.setActive(!0,ju)});
