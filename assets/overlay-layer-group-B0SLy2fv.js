import{a6 as n,w as c,aJ as i,aK as l,aL as u,aI as d,aG as a}from"./background-layer-group-Spx6dEoP.js";import{V as h}from"./Vector-CSKsS-9n.js";const y=o=>{const t=o.reduce((e,r)=>n(e,r.getGeometry()?.getExtent()??[]),c())??null;return t&&!i(t)?t:null},f="olcOverlayLayerGroupUid";class E extends l{featuresAffected;featuresPropertyChanged;constructor(t,e={}){const r=e.groupUid??f;super(t);const s=e.position??20;this.addLayerGroup(r,s),this.featuresAffected=new u,this.featuresPropertyChanged=new u}getVectorLayer(t){const e=super.getLayer(t);return e instanceof h?e:null}getVectorSource(t){const e=this.getVectorLayer(t);return e===null?null:e.getSource()}getEndVectorSource(t){const e=this.getVectorSource(t);return e&&Object.hasOwn(e,"source")?e.getSource():e}addFeatures(t,e){const r=this.getEndVectorSource(t);!r||!e.length||(this.removeFeatures(t,e),r.addFeatures(e))}removeFeatures(t,e){const r=this.getEndVectorSource(t);!r||!e.length||e.forEach(s=>{r.hasFeature(s)&&r.removeFeature(s)})}setFeatures(t,e){const r=this.getEndVectorSource(t);r&&(r.clear(),r.addFeatures(e))}getLayerFeaturesExtent(t){return y(this.getFeaturesCollection(t)?.getArray()||[])}getFeaturesExtent(){const t=this.layerGroup.getLayers().getArray().reduce((e,r)=>n(e,this.getLayerFeaturesExtent(d(r)??"")??[]),c());return t&&!i(t)?t:null}getFeaturesCollection(t){return this.getEndVectorSource(t)?.getFeaturesCollection()||null}emitFeaturesAffected(t,e,r,s){this.featuresAffected.next({[a]:t,reason:e,affected:r,noMoreAffected:s})}setFeaturesProperty(t,e,r,s){e.forEach(g=>{g.set(r,s,!0)}),this.emitFeaturePropertyChanged(t,e,r)}emitFeaturePropertyChanged(t,e,r){this.getLayer(t)?.changed(),this.featuresPropertyChanged.next({[a]:t,propertyKey:r,features:e})}getClusterFeatures(t){const e=this.getVectorSource(t);return e?e.getFeatures():null}}export{E as O};
